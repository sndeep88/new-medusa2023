import{u as S,c as v,q as E,r as o,T as P,j as l,a as e,F as j,B as k}from"./index-effbfb95.js";import{u as F}from"./index.esm-5a89640b.js";import{d as M}from"./index.modern-026fb350.js";import{M as R}from"./index-64d1e3c7.js";import{L as T,S as n}from"./login-layout-401893af.js";import _ from"./index-e03095e8.js";import{g as q}from"./error-messages-d2d0bb30.js";import"./index-dddb2ad8.js";import"./index-740955bd.js";import"./index-0f96226b.js";import"./index-202b6dd7.js";const H=()=>{const p=S(),f=v(),s=E.parse(f.search.substring(1));let r=null;if(s!=null&&s.token)try{r=M(s.token)}catch{r=null}const[w,i]=o.useState(!1),[g,d]=o.useState(null),[h,m]=o.useState(!1),c=(r==null?void 0:r.email)||(s==null?void 0:s.email)||"",{register:u,handleSubmit:x,formState:a}=F({defaultValues:{password:"",repeat_password:""}}),y=P(),b=t=>{if(i(!1),d(null),t.password!==t.repeat_password){i(!0);return}y.mutate({token:s.token,password:t.password,email:c},{onSuccess:()=>{p("/login")},onError:N=>{d(q(N))}})};return o.useEffect(()=>{a.dirtyFields.password&&a.dirtyFields.repeat_password?m(!0):m(!1)},[a]),l(T,{children:[e(_,{title:"Reset Password"}),e("div",{className:"flex h-full w-full items-center justify-center",children:e("div",{className:"flex min-h-[540px] bg-grey-0 rounded-rounded justify-center",children:l("form",{className:"flex flex-col py-12 w-full px-[120px] items-center",onSubmit:x(b),children:[e(R,{}),r?l(j,{children:[e("span",{className:"inter-2xlarge-semibold mt-4 text-grey-90",children:"Reset your password"}),e("span",{className:"inter-base-regular text-grey-50 mt-2 mb-xlarge",children:"Choose a new password below üëáüèº"}),e(n,{placeholder:"Email",name:"first_name",value:c,readOnly:!0}),e(n,{placeholder:"Password",type:"password",...u("password",{required:!0}),autoComplete:"new-password"}),e(n,{placeholder:"Confirm password",type:"password",...u("repeat_password",{required:!0}),autoComplete:"new-password",className:"mb-0"}),g&&e("span",{className:"text-rose-50 w-full mt-xsmall inter-small-regular",children:"The two passwords are not the same"}),w&&e("span",{className:"text-rose-50 w-full mt-xsmall inter-small-regular",children:"The two passwords are not the same"}),e(k,{variant:"primary",size:"large",type:"submit",className:"w-full mt-base rounded-rounded",loading:a.isSubmitting,disabled:!h,children:"Reset Password"})]}):l("div",{className:"h-full flex flex-col gap-y-2 text-center items-center justify-center",children:[e("span",{className:"inter-large-semibold text-grey-90",children:"You reset link is invalid"}),e("span",{className:"inter-base-regular text-grey-50 mt-2",children:"Please try resetting your password again"})]})]})})})]})};export{H as default};
