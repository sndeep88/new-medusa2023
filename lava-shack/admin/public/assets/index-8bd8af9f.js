import{bR as oe,r as c,a as e,M as A,j as d,B as R,bS as Fe,C as K,q,u as ce,d as H,bT as Ie,m as de,bU as je,G as Ae,Z as Re,bA as _e,bV as ke,R as Oe,b as ee}from"./index-effbfb95.js";import{I as J,P as ue}from"./index-dd9f9076.js";import{u as G}from"./use-notification-9f7c3c92.js";import{F as $}from"./focus-modal-d105ce27.js";import{A as te}from"./index-bf34ad3b.js";import{r as W,a as De,T as O,A as Me}from"./index-0d9858ea.js";import{E as Ee}from"./edit-icon-8c1c10d1.js";import{T as fe}from"./trash-icon-abcb5140.js";import{S as se}from"./chevron-down-6a69fe38.js";import{D as ze}from"./index-f258cc00.js";import{l as ae}from"./lodash-72dfe3e0.js";import{P as Le}from"./filter-dropdown-10fffb0a.js";import{u as me}from"./use-query-filters-844ebb5f.js";import{I as ne}from"./index-d33be3e8.js";import{I as qe}from"./image-placeholder-b3cbea02.js";import{S as He}from"./index-b1c04d04.js";import{S as Be}from"./index-f2ff65ef.js";import{T as Ue}from"./two-split-pane-2374ac88.js";import{F as Qe}from"./index-ec3b8ff9.js";import{B as Je}from"./index-d895e52c.js";import{u as le}from"./use-toggle-state-9e07c572.js";import{u as Ge}from"./use-imperative-dialog-cb4e5fcf.js";import"./index.esm-5a89640b.js";import"./index-1ec19c89.js";import"./index-e25e2e97.js";import"./index-b17c211e.js";import"./moment-fbc5633a.js";import"./time-5c3c185e.js";import"./unsupportedIterableToArray-27301055.js";import"./createSuper-ad9f6885.js";import"./index-202b6dd7.js";import"./arrow-down-icon-49435f5a.js";import"./index-903c1727.js";import"./chevron-up-ae6c75fe.js";import"./index-4192ae3e.js";import"./_isIndex-6af6139d.js";import"./index-04f3341e.js";function Ve(t){const{handleClose:a,salesChannel:n}=t,i=G(),{mutate:l,isLoading:s}=oe(n.id),[m,p]=c.useState(n.name),[o,u]=c.useState(n.description),h=()=>{l({name:m,description:o},{onSuccess:()=>{i("Success","The sales channel is successfully updated","success"),a()},onError:()=>i("Error","Failed to update the sales channel","error")})};return e(A,{handleClose:a,children:d(A.Body,{children:[e(A.Header,{handleClose:a,children:e("span",{className:"inter-xlarge-semibold",children:"Sales channel details"})}),d(A.Content,{children:[e("div",{className:"inter-base-semibold text-grey-90 mb-4",children:"General info"}),d("div",{className:"w-full flex flex-col gap-3",children:[e(J,{label:"Name",name:"name",value:m,onChange:x=>p(x.target.value)}),e(J,{label:"Description",name:"description",value:o,onChange:x=>u(x.target.value)})]})]}),e(A.Footer,{children:d("div",{className:"w-full flex justify-end",children:[e(R,{variant:"ghost",size:"small",onClick:a,className:"mr-2",children:"Close"}),e(R,{disabled:!m.length||s,variant:"primary",className:"min-w-[100px]",size:"small",onClick:h,loading:s,children:"Save"})]})})]})})}function Ze(t){const{name:a,description:n,setName:i,setDescription:l}=t;return d("div",{className:"flex flex-col gap-y-base my-base",children:[e("div",{className:"flex-1",children:e(J,{label:"Title",type:"string",name:"name",placeholder:"Website, app, Amazon, physical store POS, facebook product feed...",value:a,onChange:s=>i(s.target.value)})}),e("div",{className:"flex-1",children:e(J,{label:"Description",type:"string",name:"description",placeholder:"Available products at our website, app...",value:n,onChange:s=>l(s.target.value)})})]})}const $e=({onClose:t})=>{const{mutate:a}=Fe(),n=G(),[i,l]=c.useState(),[s,m]=c.useState();async function p(){await a({name:i,description:s},{onSuccess:({sales_channel:u})=>{n("Success","The sales channel is successfully created","success"),t(u.id)},onError:()=>n("Error","Failed to create the sales channel","error")})}async function o(){await a({name:i,description:s,is_disabled:!0},{onSuccess:({sales_channel:u})=>{n("Success","The sales channel is successfully created","success"),t(u.id)},onError:()=>n("Error","Failed to create the sales channel","error")})}return d($,{children:[e($.Header,{children:d("div",{className:"medium:w-8/12 w-full px-8 flex justify-between",children:[e(R,{size:"small",variant:"ghost",onClick:t,className:"border rounded-rounded w-8 h-8",children:e(K,{size:20})}),d("div",{className:"gap-x-small flex",children:[e(R,{size:"small",variant:"secondary",onClick:()=>o(),disabled:!i,className:"rounded-rounded",children:"Save as draft"}),e(R,{size:"small",variant:"primary",onClick:()=>p(),disabled:!i,className:"rounded-rounded",children:"Publish channel"})]})]})}),e($.Main,{children:e("div",{className:"flex justify-center mb-[25%]",children:d("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 w-full pt-16",children:[e("h1",{className:"inter-xlarge-semibold",children:"Create new sales channel"}),e(te,{className:"pt-7 text-grey-90",defaultValue:["general"],type:"multiple",children:e(te.Item,{title:"General info",value:"general",forceMountContent:!0,children:e(Ze,{name:i,description:s,setName:l,setDescription:m})})})]})})})]})},We=["status","collection_id","payment_status","created_at"],Y={drafts:{status:["draft"]},proposed:{status:["proposed"]}},Ye=(t,a)=>{switch(a.type){case"setFilters":return{...t,status:a.payload.status,collection:a.payload.collection,tags:a.payload.tags,date:a.payload.date};case"reset":return a.payload;default:return t}},Ke=(t,a)=>{if(t.size!==a.size)return!1;for(const n of t)if(!a.has(n))return!1;return!0},pe=(t,a=null)=>{t&&t[0]==="?"&&(t=t.substring(1));const n=c.useMemo(()=>et(t,a),[t,a]),i=c.useMemo(()=>{const r=localStorage.getItem("products::filters");if(r){const b=JSON.parse(r);if(b)return Object.entries(b).map(([f,y])=>({label:f,value:f,removable:!0,representationString:y}))}return[]},[]),[l,s]=c.useReducer(Ye,n),[m,p]=c.useState(i),o=r=>{s({type:"setDate",payload:r})},u=r=>{s({type:"setFulfillment",payload:r})},h=r=>{s({type:"setPayment",payload:r})},x=r=>{s({type:"setStatus",payload:r})},P=r=>{s({type:"setDefaults",payload:r})},T=()=>{s({type:"setFilters",payload:{...l,status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null}}})},j=r=>{s({type:"setFilters",payload:r})},k=()=>{const r={...l.additionalFilters};for(const[b,f]of Object.entries(l))f!=null&&f.open&&(r[re[b]]=f.filter);return r},g=r=>{const b=r??l,f={};for(const[y,v]of Object.entries(b))y==="query"?v&&typeof v=="string"&&(f.q=v):y==="offset"||y==="limit"?f[y]=v:v!=null&&v.open&&(f[re[y]]=v.filter);return f},C=()=>{const r=g();return q.stringify(r,{skipNulls:!0})},_=c.useMemo(()=>k(),[l]),w=c.useMemo(()=>g(),[l]),V=c.useMemo(()=>C(),[l]),E=c.useMemo(()=>{const r=ae.omit(w,["limit","offset"]),b=q.stringify(r),f=m.find(y=>y.representationString===b);if(f)return f.value;for(const[y,v]of Object.entries(Y)){let N=!0;if(Object.keys(r).length===Object.keys(v).length){for(const[F,I]of Object.entries(v))if(F in r?Array.isArray(I)?N=Array.isArray(r[F])&&Ke(new Set(r[F]),new Set(I)):N=r[F]===I:N=!1,!N)break;if(N)return y}}return null},[w,m]),z=c.useMemo(()=>[{label:"Unpublished",value:"drafts"},...m],[m]),Z=r=>{let b=null;if(r in Y)b=Y[r];else{const f=m.find(y=>y.value===r);f&&(b=q.parse(f.representationString))}if(b){const f={...l,date:{open:!1,filter:null},status:{open:!1,filter:null},tags:{open:!1,filter:null},collection:{open:!1,filter:null}};for(const[y,v]of Object.entries(b))f[Xe[y]]={open:!0,filter:v};s({type:"setFilters",payload:f})}},D=(r,b)=>{const f=g({...b}),y=ae.omit(f,["limit","offset"]),v=q.stringify(y,{skipNulls:!0}),N=localStorage.getItem("products::filters");let F=null;if(N&&(F=JSON.parse(N)),F)F[r]=v,localStorage.setItem("products::filters",JSON.stringify(F));else{const I={};I[r]=v,localStorage.setItem("products::filters",JSON.stringify(I))}p(I=>{const U=I.findIndex(Q=>{var L;return((L=Q.label)==null?void 0:L.toLowerCase())===r.toLowerCase()});return U!==-1&&I.splice(U,1),[...I,{label:r,value:r,representationString:v,removable:!0}]}),s({type:"setFilters",payload:b})},B=r=>{const b=localStorage.getItem("products::filters");let f=null;b&&(f=JSON.parse(b)),f&&(delete f[r],localStorage.setItem("products::filters",JSON.stringify(f))),p(y=>y.filter(N=>N.value!==r))};return{...l,filters:{...l},removeTab:B,saveTab:D,setTab:Z,availableTabs:z,activeFilterTab:E,representationObject:w,representationString:V,queryObject:_,setFilters:j,setDefaultFilters:P,setDateFilter:o,setFulfillmentFilter:u,setPaymentFilter:h,setStatusFilter:x,reset:T}},Xe={status:"status",collection_id:"collection",tags:"tags",created_at:"date"},re={status:"status",collection:"collection_id",tags:"tags",date:"created_at"},et=(t,a=null)=>{const n={status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},additionalFilters:a};if(t){const i=q.parse(t);for(const[l,s]of Object.entries(i))if(We.includes(l))switch(l){case"status":{(typeof s=="string"||Array.isArray(s))&&(n.status={open:!0,filter:s});break}case"collection_id":{(typeof s=="string"||Array.isArray(s))&&(n.collection={open:!0,filter:s});break}case"payment_status":{(typeof s=="string"||Array.isArray(s))&&(n.payment={open:!0,filter:s});break}case"created_at":{n.date={open:!0,filter:s};break}}}return n},tt=[{width:30,id:"selection",Header:({getToggleAllPageRowsSelectedProps:t})=>e("span",{className:"flex justify-center",children:e(ne,{...t()})}),Cell:({row:t})=>e("span",{onClick:a=>a.stopPropagation(),className:"flex justify-center",children:e(ne,{...t.getToggleRowSelectedProps()})})},{Header:"Name",accessor:"title",Cell:({row:{original:t}})=>d("div",{className:"flex items-center",children:[e("div",{className:"h-[40px] w-[30px] my-1.5 flex items-center mr-4",children:t.thumbnail?e("img",{src:t.thumbnail,className:"h-full object-cover rounded-soft"}):e("div",{className:"flex items-center justify-center w-full h-full rounded-soft bg-grey-10",children:e(qe,{size:16})})}),t.title]})},{Header:"Collection",accessor:"collection",Cell:({cell:{value:t}})=>e("div",{children:(t==null?void 0:t.title)||"-"})}];function st({showAddModal:t}){return d("div",{className:"h-full flex flex-col justify-center items-center",children:[e("span",{className:"text-grey-50",children:e(He,{width:"48",height:"48"})}),e("h3",{className:"font-semibold text-large text-gray-90 mt-6",children:"Start building your channels setup..."}),e("p",{className:"mt-2 mb-8 text-grey-50 w-[358px] text-center",children:"You haven’t added any products to this channels yet, but once you do they will live here."}),e(R,{onClick:t,variant:"primary",size:"small",children:"Add products"})]})}const he=7,ge={additionalFilters:{expand:"collection,type,sales_channels",fields:"id,title,thumbnail,status"},limit:he,offset:0},be=c.forwardRef((t,a)=>{const{tableActions:n,currentSalesChannelId:i,productFilters:{setTab:l,saveTab:s,removeTab:m,availableTabs:p,activeFilterTab:o,setFilters:u,filters:h,reset:x},paginate:P,setQuery:T,queryObject:j,isLoading:k,isAddTable:g,count:C,products:_,setSelectedRowIds:w,removeProductFromSalesChannel:V}=t,E=parseInt(j.offset)||0,z=parseInt(j.limit),Z=ce(),[D,B]=c.useState(j.query),[r,b]=c.useState(0),f=()=>{x(),B("")};c.useEffect(()=>{if(typeof C<"u"){const S=Math.ceil(C/z);b(S)}},[C]);const{getTableProps:y,getTableBodyProps:v,headerGroups:N,rows:F,prepareRow:I,gotoPage:U,canPreviousPage:Q,canNextPage:L,pageCount:ye,nextPage:ve,previousPage:Se,toggleAllRowsSelected:xe,toggleRowSelected:Ce,state:{pageIndex:we,pageSize:pt,...X}}=W.useTable({columns:tt,data:_||[],manualPagination:!0,initialState:{pageIndex:Math.floor(E/z),pageSize:z},pageCount:r,autoResetPage:!1,autoResetSelectedRows:!1,getRowId:S=>S.id,stateReducer:(S,M)=>{switch(M.type){case"toggleAllRowsSelected":return{...S,selectedRowIds:{}};default:return S}}},W.usePagination,W.useRowSelect);c.useImperativeHandle(a,()=>({toggleAllRowsSelected:xe})),c.useEffect(()=>{w(Object.keys(X.selectedRowIds))},[X.selectedRowIds]),c.useEffect(()=>{const S=setTimeout(()=>{D?(T(D),U(0)):typeof D<"u"&&T("")},400);return()=>clearTimeout(S)},[D]);const Ne=()=>{L&&(P(1),ve())},Pe=()=>{Q&&(P(-1),Se())},Te=S=>[{label:"Details",onClick:()=>Z(`/a/products/${S}`),icon:e(ze,{size:20})},{label:"Remove from the channel",variant:"danger",onClick:()=>V(S),icon:e(fe,{size:20})}];return e(De,{isLoading:k,numberOfRows:he,hasPagination:!0,pagingState:{count:C,offset:E,pageSize:E+F.length,title:"Products",currentPage:we+1,pageCount:ye,nextPage:Ne,prevPage:Pe,hasNext:L,hasPrev:Q},children:d(O,{tableActions:n,containerClassName:"flex-1",filteringOptions:h&&e(Le,{filters:h,submitFilters:u,clearFilters:f,tabs:p,onTabClick:l,activeTab:o,onRemoveTab:m,onSaveTab:s}),enableSearch:g,handleSearch:B,...y(),children:[e(O.Head,{children:N==null?void 0:N.map(S=>e(O.HeadRow,{...S.getHeaderGroupProps(),children:S.headers.map(M=>e(O.HeadCell,{...M.getHeaderProps(),children:M.render("Header")}))}))}),e(O.Body,{...v(),children:F.map(S=>(I(S),e(at,{onClick:()=>Ce(S.id),disabled:!!S.original.sales_channels.find(M=>M.id===i),row:S,actions:g?void 0:Te(S.original.id)})))})]})})}),at=({row:t,actions:a,onClick:n,disabled:i})=>e(O.Row,{onClick:!i&&n,color:"inherit",className:H("cursor-pointer",{"bg-grey-5":t.isSelected,"opacity-40 cursor-not-allowed pointer-events-none":i}),actions:a,...t.getRowProps(),children:t.cells.map((l,s)=>e(O.Cell,{...l.getCellProps(),children:l.render("Cell",{index:s})}))});function nt({onClose:t,onRemove:a,total:n}){return e("div",{className:H("absolute w-full bottom-1 flex justify-center transition-all duration-200 pointer-events-none",{"translate-y-1 opacity-0":!n,"translate-y-0 opacity-100":n}),children:d("div",{className:"h-[48px] min-w-[224px] rounded-lg border shadow-toaster flex items-center justify-around gap-3 px-4 py-3 pointer-events-auto",children:[d("span",{className:"text-small text-grey-50",children:[n," selected"]}),e("div",{className:"w-[1px] h-[20px] bg-grey-20"}),e(R,{variant:"danger",size:"small",onClick:a,children:"Remove"}),e("button",{onClick:t,className:"text-grey-50 cursor-pointer",children:e(K,{size:20})})]})})}function lt(t){const a=c.useRef(),{salesChannelId:n,showAddModal:i}=t,[l,s]=c.useState([]),m=G(),p=me(ge),o=pe(),{mutate:u}=Ie(n),{products:h,count:x,isLoading:P}=de({...p.queryObject,...o.queryObject,sales_channel_id:[t.salesChannelId]}),T=()=>{var w;s([]),(w=a.current)==null||w.toggleAllRowsSelected(!1)};c.useEffect(()=>{T()},[h,n]);const j=w=>{u({product_ids:[{id:w}]}),m("Success","Product successfully removed","success")},k=async()=>{await u({product_ids:l.map(w=>({id:w}))}),m("Success","Products successfully removed from the sales channel","success"),T()},g=Object.keys(o.queryObject).length,C=p.queryObject.q;if(!(h!=null&&h.length)&&!P&&!g&&!C)return e(st,{showAddModal:i});const _=l.length;return d("div",{className:"relative",children:[e(be,{ref:a,count:x||0,isLoading:P,products:h||[],removeProductFromSalesChannel:j,setSelectedRowIds:s,productFilters:o,...p}),e(nt,{total:_,onRemove:k,onClose:T})]})}function rt(t){const{handleClose:a,salesChannel:n}=t,[i,l]=c.useState([]),s=G(),m=me(ge),p=pe(),{products:o,count:u,isLoading:h}=de({...m.queryObject,...p.queryObject,expand:"sales_channels"}),{mutate:x,isLoading:P}=je(n.id),T=()=>{x({product_ids:i.map(j=>({id:j}))}),a(),s("Success","Products successfully added to the sales channel","success")};return e(A,{handleClose:a,children:d(A.Body,{children:[e(A.Header,{handleClose:a,children:e("span",{className:"inter-xlarge-semibold",children:"Add products"})}),e(A.Content,{children:e(be,{isAddTable:!0,isLoading:h,products:o||[],count:u||0,setSelectedRowIds:l,productFilters:p,currentSalesChannelId:n.id,...m})}),e(A.Footer,{children:d("div",{className:"w-full flex justify-end",children:[e(R,{variant:"ghost",size:"small",onClick:a,className:"mr-2",children:"Close"}),e(R,{variant:"primary",className:"min-w-[100px]",size:"small",onClick:T,loading:P,disabled:P,children:"Save"})]})})]})})}function it(t){const{isActive:a}=t;return e("div",{className:H("flex justify-center items-center flex-shrink-0 w-[18px] h-[18px] bg-white border rounded-circle",{"border-2 border-violet-60":a}),children:a&&e("div",{className:"w-[10px] h-[10px] bg-violet-60 rounded-circle"})})}function ot(){return e("div",{className:`
      w-[54px] h-[28px]
      rounded-xl
      bg-grey-10
      flex items-center justify-center
      text-grey-50 text-small font-semibold`,children:"Draft"})}function ct(t){const{salesChannel:a,isSelected:n,onClick:i,isDisabled:l}=t;return d("div",{onClick:i,className:H("mb-2 p-4 cursor-pointer rounded-lg border flex justify-between h-[83px]",{"border-2 border-violet-60":n}),children:[d("div",{className:"flex gap-2 overflow-hidden",children:[e(it,{isActive:n}),d("div",{className:"block overflow-hidden truncate",children:[e("h3",{className:"mb-1 font-semibold leading-5 text-grey-90",children:a.name}),e("span",{title:a.description,className:"text-small text-grey-50 ",children:a.description})]})]}),l&&e("div",{className:"flex flex-col justify-center flex-shrink-0",children:e(ot,{})})]})}function dt(t){const{openCreateModal:a,filterText:n,setFilterText:i}=t,[l,s]=c.useState(!1),m=c.useRef(),p={"translate-y-[-50px]":l,"translate-y-[0px]":!l},o=()=>{s(!1),i("")};return e("div",{className:"h-[55px] mb-6 overflow-hidden",children:d("div",{className:H("transition-all duration-200",p),children:[d("div",{className:"h-[55px]",children:[d("div",{className:"flex items-center justify-between mb-1",children:[e("h2",{className:"font-semibold text-xlarge text-grey-90",children:"Sales channels"}),d("div",{className:"flex items-center justify-between gap-4",children:[e(se,{size:15,onClick:()=>s(!0),className:"cursor-pointer"}),e(ue,{size:15,onClick:a,className:"cursor-pointer"})]})]}),e("div",{className:"text-grey-50 text-small mb-6 block overflow-hidden truncate max-w-[100%]",children:"Control which products are available in which channels"})]}),d("div",{className:"h-[40px] my-[5px] w-full flex items-center justify-around gap-2 text-grey-40 bg-grey-5 px-4 rounded-xl border",children:[e(se,{size:20}),e("input",{ref:m,value:n,onChange:u=>i(u.target.value),placeholder:"Search by title or description",className:"w-full font-normal outline-none bg-inherit outline-0 remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40",onBlur:()=>s(!!n),autoComplete:"off"}),e(K,{onClick:o,className:"cursor-pointer"})]})]})})}function ut(t){const{activeChannelId:a,openCreateModal:n,setActiveSalesChannelId:i,salesChannels:l,filterText:s,setFilterText:m}=t;return d("div",{className:"col-span-1 rounded-lg border bg-grey-0 border-grey-20 px-8 py-6 h-[968px]",children:[e(dt,{filterText:s,setFilterText:m,openCreateModal:n}),e("div",{children:l==null?void 0:l.map(p=>e(ct,{salesChannel:p,isDisabled:p.is_disabled,isSelected:a===p.id,onClick:()=>i(p.id)}))})]})}function ft(t){const{isDefault:a,salesChannel:n,openUpdateModal:i,resetDetails:l,showProductsAdd:s}=t,{mutate:m}=ke(n.id),{mutate:p}=oe(n.id),o=Ge(),u=async()=>{await o({text:"Are you sure you want to delete this sales channel? The setup you made will be gone forever.",heading:"Delete Channel",extraConfirmation:!0,entityName:n.name})&&(m(),l())},h=c.useMemo(()=>{const x=[{label:"Edit general info",icon:e(Ee,{size:"20"}),onClick:i},{label:"Add products",icon:e(ue,{}),onClick:()=>s()}];return a||x.push({label:"Delete channel",icon:e(fe,{size:20}),variant:"danger",onClick:u}),x},[i]);return d("div",{className:"flex items-center justify-between",children:[e("h2",{className:"mb-4 font-semibold text-xlarge text-grey-90",children:n.name}),d("div",{className:"flex items-center justify-between gap-4",children:[e(Be,{onChange:()=>p({is_disabled:!n.is_disabled}),isDraft:n.is_disabled,draftState:"Disabled",activeState:"Enabled"}),e(Me,{forceDropdown:!0,actions:h})]})]})}function mt(t){const{resetDetails:a,salesChannel:n,isDefault:i}=t,[l,s,m]=le(!1),[p,o,u]=le(!1);return d("div",{className:"col-span-2 rounded-rounded border bg-grey-0 border-grey-20 px-8 py-6 h-[968px]",children:[e(ft,{isDefault:i,resetDetails:a,salesChannel:n,openUpdateModal:s,showProductsAdd:o}),e(lt,{salesChannelId:n.id,showAddModal:o}),l&&e(Ve,{handleClose:m,salesChannel:n}),p&&e(rt,{salesChannel:n,handleClose:u})]})}function ie(){const{id:t}=Ae(),[a,n]=c.useState(),[i,l]=c.useState(!1),[s,m]=c.useState(),p=ce(),{store:o}=Re(),{sales_channels:u}=_e(),h=g=>{p(`/a/sales-channels/${g}`)};c.useEffect(()=>{u&&o&&h(s?s.id:o.default_sales_channel_id)},[u,o,s==null?void 0:s.id]),c.useEffect(()=>{if(t!==(s==null?void 0:s.id)){const g=u==null?void 0:u.find(C=>C.id===t);m(g)}},[t,s,u]);const x=()=>l(!0),P=g=>{h(g),l(!1)},T=()=>{h(o.default_sales_channel_id)};function j(g,C){return g.id===(o==null?void 0:o.default_sales_channel_id)?-1:C.id===(o==null?void 0:o.default_sales_channel_id)?1:g.name.localeCompare(C.name)}function k(g){return a?g.filter(C=>{var w;const _=a.toLowerCase();return!!C.name.toLowerCase().match(_)||!!((w=C.description)!=null&&w.toLowerCase().match(_))}):g}return!u||!s?null:d("div",{children:[e(Je,{currentPage:"Sales channels",previousBreadcrumb:"Settings",previousRoute:"/a/settings"}),d(Ue,{threeCols:!0,children:[e(ut,{filterText:a,setFilterText:n,openCreateModal:x,activeChannelId:s.id,setActiveSalesChannelId:h,salesChannels:k(u).sort(j)}),s&&e(mt,{isDefault:s.id===(o==null?void 0:o.default_sales_channel_id),salesChannel:u.find(g=>g.id===s.id),resetDetails:T})]}),e(Qe,{isVisible:i,isFullScreen:!0,children:e($e,{onClose:P})})]})}const Kt=()=>d(Oe,{children:[e(ee,{index:!0,element:e(ie,{})}),e(ee,{path:"/:id",element:e(ie,{})})]});export{Kt as default};
