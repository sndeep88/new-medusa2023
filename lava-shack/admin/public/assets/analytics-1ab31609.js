import{cE as U,cF as w,cG as k,cH as A,cI as x,g as Fr,cJ as Dr,_ as z,f as D,cK as Tr,i as Wt,cL as Nr,cM as Ht,cd as jr,r as L,j as Y,d as Yt,a as T,B as kr,c as Lr,X as Rr,cN as Ur,Z as Br}from"./index-effbfb95.js";import{F as $r}from"./index-ec3b8ff9.js";import{b as Xe,C as jt,u as zr}from"./index.esm-5a89640b.js";import{u as qr}from"./use-debounce-438a4ce8.js";import{a as Kr}from"./axios-4a70c6fc.js";import{W as Vr}from"./a-0eba6a7f.js";import{u as Jr}from"./use-notification-9f7c3c92.js";import{g as Gr}from"./error-messages-d2d0bb30.js";import{n as Qr}from"./nested-form-c66382a0.js";import{I as Wr}from"./index-dd9f9076.js";import{F as kt}from"./focus-modal-d105ce27.js";import{S as Lt}from"./index-523daaeb.js";var ut=function(){function e(){this.callbacks={}}return e.prototype.on=function(t,r){return this.callbacks[t]?this.callbacks[t].push(r):this.callbacks[t]=[r],this},e.prototype.once=function(t,r){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(t,i),r.apply(n,o)};return this.on(t,i),this},e.prototype.off=function(t,r){var n,i=(n=this.callbacks[t])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==r});return this.callbacks[t]=o,this},e.prototype.emit=function(t){for(var r=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[t])!==null&&n!==void 0?n:[];return a.forEach(function(s){s.apply(r,i)}),this},e}();function je(e,t,r){t.split&&(t=t.split("."));for(var n=0,i=t.length,o=e,a,s;n<i&&(s=t[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)o=o[s]=n===i?r:typeof(a=o[s])==typeof t?a:t[n]*0!==0||~(""+t[n]).indexOf(".")?{}:[]}const Vo=Object.freeze(Object.defineProperty({__proto__:null,dset:je},Symbol.toStringTag,{value:"Module"}));var ne=function(e){U(t,e);function t(r,n){var i=e.call(this,"".concat(r," ").concat(n))||this;return i.field=r,i}return t}(Error);function oe(e){return typeof e=="string"}function et(e){return typeof e=="number"}function de(e){return typeof e=="function"}function Zt(e){return e!=null}function J(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==="object"}var ct="is not a string",Hr="is not an object",Xt="is nil";function Yr(e){var t=".userId/anonymousId/previousId/groupId",r=function(i){var o,a,s;return(s=(a=(o=i.userId)!==null&&o!==void 0?o:i.anonymousId)!==null&&a!==void 0?a:i.groupId)!==null&&s!==void 0?s:i.previousId},n=r(e);if(Zt(n)){if(!oe(n))throw new ne(t,ct)}else throw new ne(t,Xt)}function Zr(e){if(!Zt(e))throw new ne("Event",Xt);if(typeof e!="object")throw new ne("Event",Hr)}function Xr(e){if(!oe(e.type))throw new ne(".type",ct)}function en(e){if(!oe(e.event))throw new ne(".event",ct)}function tn(e,t){return new Promise(function(r,n){var i=setTimeout(function(){n(Error("Promise timed out"))},t);e.then(function(o){return clearTimeout(i),r(o)}).catch(n)})}function rn(e){return new Promise(function(t){return setTimeout(t,e)})}function nn(e,t,r){var n=function(){try{return Promise.resolve(t(e))}catch(i){return Promise.reject(i)}};return rn(r).then(function(){return tn(n(),1e3)}).catch(function(i){e==null||e.log("warn","Callback Error",{error:i}),e==null||e.stats.increment("callback_error")}).then(function(){return e})}function on(e){var t=Math.random()+1,r=e.minTimeout,n=r===void 0?500:r,i=e.factor,o=i===void 0?2:i,a=e.attempt,s=e.maxTimeout,d=s===void 0?1/0:s;return Math.min(t*n*Math.pow(o,a),d)}var er="onRemoveFromFuture",lt=function(e){U(t,e);function t(r,n,i){var o=e.call(this)||this;return o.future=[],o.maxAttempts=r,o.queue=n,o.seen=i??{},o}return t.prototype.push=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var s=r.updateAttempts(a);return s>r.maxAttempts||r.includes(a)?!1:(r.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return r.getAttempts(a)-r.getAttempts(s)}),o},t.prototype.pushWithBackoff=function(r){var n=this;if(this.getAttempts(r)===0)return this.push(r)[0];var i=this.updateAttempts(r);if(i>this.maxAttempts||this.includes(r))return!1;var o=on({attempt:i-1});return setTimeout(function(){n.queue.push(r),n.future=n.future.filter(function(a){return a.id!==r.id}),n.emit(er)},o),this.future.push(r),!0},t.prototype.getAttempts=function(r){var n;return(n=this.seen[r.id])!==null&&n!==void 0?n:0},t.prototype.updateAttempts=function(r){return this.seen[r.id]=this.getAttempts(r)+1,this.getAttempts(r)},t.prototype.includes=function(r){return this.queue.includes(r)||this.future.includes(r)||!!this.queue.find(function(n){return n.id===r.id})||!!this.future.find(function(n){return n.id===r.id})},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(ut),te=256,Te=[],Me;for(;te--;)Te[te]=(te+256).toString(16).substring(1);function ft(){var e=0,t,r="";if(!Me||te+16>256){for(Me=Array(e=256);e--;)Me[e]=256*Math.random()|0;e=te=0}for(;e<16;e++)t=Me[te+e],e==6?r+=Te[t&15|64]:e==8?r+=Te[t&63|128]:r+=Te[t],e&1&&e>1&&e<11&&(r+="-");return te++,r}var an=function(){function e(){this._logs=[]}return e.prototype.log=function(t,r,n){var i=new Date;this._logs.push({level:t,message:r,time:i,extras:n})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce(function(r,n){var i,o,a,s=w(w({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var d=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return r[d]&&(d="".concat(d,"-").concat(Math.random())),w(w({},r),(i={},i[d]=s,i))},{});console.table?console.table(t):console.log(t)}else this.logs.forEach(function(r){var n=r.level,i=r.message,o=r.extras;n==="info"||n==="debug"?console.log(i,o??""):console[n](i,o??"")});this._logs=[]},e}(),sn=function(e){var t={gauge:"g",counter:"c"};return t[e]},tr=function(){function e(){this.metrics=[]}return e.prototype.increment=function(t,r,n){r===void 0&&(r=1),this.metrics.push({metric:t,value:r,tags:n??[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(t,r,n){this.metrics.push({metric:t,value:r,tags:n??[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var t=this.metrics.map(function(r){return w(w({},r),{tags:r.tags.join(",")})});console.table?console.table(t):console.log(t),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map(function(t){return{m:t.metric,v:t.value,t:t.tags,k:sn(t.type),e:t.timestamp}})},e}(),un=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.gauge=function(){},t.prototype.increment=function(){},t.prototype.flush=function(){},t.prototype.serialize=function(){return[]},t}(tr),ve=function(){function e(t){var r,n,i;this.retry=(r=t.retry)!==null&&r!==void 0?r:!0,this.type=(n=t.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=t.reason)!==null&&i!==void 0?i:""}return e}(),ke=function(){function e(t,r,n,i){r===void 0&&(r=ft()),n===void 0&&(n=new un),i===void 0&&(i=new an),this.attempts=0,this.event=t,this._id=r,this.logger=i,this.stats=n}return e.system=function(){},e.prototype.isSame=function(t){return t.id===this.id},e.prototype.cancel=function(t){throw t||new ve({reason:"Context Cancel"})},e.prototype.log=function(t,r,n){this.logger.log(t,r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(t,r){var n;if(t.split(".")[0]==="integrations"){var i=t.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return je(this.event,t,r),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(t){this._failedDelivery=t},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}();function cn(e,t){var r={};return e.forEach(function(n){var i,o=void 0;if(typeof t=="string"){var a=n[t];o=typeof a!="string"?JSON.stringify(a):a}else t instanceof Function&&(o=t(n));o!==void 0&&(r[o]=k(k([],(i=r[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),r}var ln=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},fn=function(){var e,t,r=0;return{done:function(){return e},run:function(n){var i=n();return ln(i)&&(++r===1&&(e=new Promise(function(o){return t=o})),i.finally(function(){return--r===0&&t()})),i}}};function dn(e){return A(this,void 0,void 0,function(){var t;return x(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return[2,r.sent()];case 2:return t=r.sent(),[2,Promise.reject(t)];case 3:return[2]}})})}function Ie(e,t){e.log("debug","plugin",{plugin:t.name});var r=new Date().getTime(),n=t[e.event.type];if(n===void 0)return Promise.resolve(e);var i=dn(function(){return n.apply(t,[e])}).then(function(o){var a=new Date().getTime()-r;return o.stats.gauge("plugin_time",a,["plugin:".concat(t.name)]),o}).catch(function(o){if(o instanceof ve&&o.type==="middleware_cancellation")throw o;return o instanceof ve?(e.log("warn",o.type,{plugin:t.name,error:o}),o):(e.log("error","plugin Error",{plugin:t.name,error:o}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),o)});return i}function pn(e,t){return Ie(e,t).then(function(r){if(r instanceof ke)return r;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(r)})}var hn=function(e){U(t,e);function t(r){var n=e.call(this)||this;return n.criticalTasks=fn(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=r,n.queue.on(er,function(){n.scheduleFlush(0)}),n}return t.prototype.register=function(r,n,i){return A(this,void 0,void 0,function(){var o=this;return x(this,function(a){switch(a.label){case 0:return[4,Promise.resolve(n.load(r,i)).then(function(){o.plugins.push(n)}).catch(function(s){if(n.type==="destination"){o.failedInitializations.push(n.name),console.warn(n.name,s),r.log("warn","Failed to load destination",{plugin:n.name,error:s});return}throw s})];case 1:return a.sent(),[2]}})})},t.prototype.deregister=function(r,n,i){return A(this,void 0,void 0,function(){var o;return x(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(r,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return o=a.sent(),r.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},t.prototype.dispatch=function(r){return A(this,void 0,void 0,function(){var n;return x(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.push(r),n=this.subscribeToDelivery(r),this.scheduleFlush(0),[2,n]})})},t.prototype.subscribeToDelivery=function(r){return A(this,void 0,void 0,function(){var n=this;return x(this,function(i){return[2,new Promise(function(o){var a=function(s,d){s.isSame(r)&&(n.off("flush",a),o(s))};n.on("flush",a)})]})})},t.prototype.dispatchSingle=function(r){return A(this,void 0,void 0,function(){var n=this;return x(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.updateAttempts(r),r.attempts=1,[2,this.deliver(r).catch(function(o){var a=n.enqueuRetry(o,r);return a?n.subscribeToDelivery(r):(r.setFailedDelivery({reason:o}),r)})]})})},t.prototype.isEmpty=function(){return this.queue.length===0},t.prototype.scheduleFlush=function(r){var n=this;r===void 0&&(r=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},r))},t.prototype.deliver=function(r){return A(this,void 0,void 0,function(){var n,i,o,a;return x(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(r)];case 3:return r=s.sent(),i=Date.now()-n,this.emit("delivery_success",r),r.stats.gauge("delivered",i),r.log("debug","Delivered",r.event),[2,r];case 4:throw o=s.sent(),a=o,r.log("error","Failed to deliver",a),this.emit("delivery_failure",r,a),r.stats.increment("delivery_failed"),o;case 5:return[2]}})})},t.prototype.enqueuRetry=function(r,n){var i=!(r instanceof ve)||r.retry;return i?this.queue.pushWithBackoff(n):!1},t.prototype.flush=function(){return A(this,void 0,void 0,function(){var r,n,i;return x(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(r=this.queue.pop(),!r)return[2,[]];r.attempts=this.queue.getAttempts(r),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(r)];case 2:return r=o.sent(),this.emit("flush",r,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,r),i||(r.setFailedDelivery({reason:n}),this.emit("flush",r,!1)),[2,[]];case 4:return[2,[r]]}})})},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(r){var n=this.plugins.filter(function(m){var _,I,S;if(m.type!=="destination"&&m.name!=="Segment.io")return!0;var h=void 0;return(_=m.alternativeNames)===null||_===void 0||_.forEach(function(p){r[p]!==void 0&&(h=r[p])}),(S=(I=r[m.name])!==null&&I!==void 0?I:h)!==null&&S!==void 0?S:(m.name==="Segment.io"?!0:r.All)!==!1}),i=cn(n,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,d=s===void 0?[]:s,v=i.destination,y=v===void 0?[]:v,g=i.after,b=g===void 0?[]:g;return{before:a,enrichment:d,destinations:y,after:b}},t.prototype.flushOne=function(r){var n,i;return A(this,void 0,void 0,function(){var o,a,s,d,v,y,_,g,b,m,_,I,S,h,p;return x(this,function(c){switch(c.label){case 0:if(!this.isReady())throw new Error("Not ready");r.attempts>1&&this.emit("delivery_retry",r),o=this.availableExtensions((n=r.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,s=o.enrichment,d=0,v=a,c.label=1;case 1:return d<v.length?(y=v[d],[4,pn(r,y)]):[3,4];case 2:_=c.sent(),_ instanceof ke&&(r=_),this.emit("message_enriched",r,y),c.label=3;case 3:return d++,[3,1];case 4:g=0,b=s,c.label=5;case 5:return g<b.length?(m=b[g],[4,Ie(r,m)]):[3,8];case 6:_=c.sent(),_ instanceof ke&&(r=_),this.emit("message_enriched",r,m),c.label=7;case 7:return g++,[3,5];case 8:return I=this.availableExtensions((i=r.event.integrations)!==null&&i!==void 0?i:{}),S=I.destinations,h=I.after,[4,new Promise(function(u,f){setTimeout(function(){var l=S.map(function(O){return Ie(r,O)});Promise.all(l).then(u).catch(f)},0)})];case 9:return c.sent(),r.stats.increment("message_delivered"),this.emit("message_delivered",r),p=h.map(function(u){return Ie(r,u)}),[4,Promise.all(p)];case 10:return c.sent(),[2,r]}})})},t}(ut),vn=function(e,t){var r=Date.now()-e;return Math.max((t??300)-r,0)};function yn(e,t,r,n){return A(this,void 0,void 0,function(){var i,o;return x(this,function(a){switch(a.label){case 0:return r.emit("dispatch_start",e),i=Date.now(),t.isEmpty()?[4,t.dispatchSingle(e)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,nn(o,n.callback,vn(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function mn(e,t,r,n){var i,o=[e,t,r,n],a=J(e)?e.event:e;if(!a||!oe(a))throw new Error("Event missing");var s=J(e)?(i=e.properties)!==null&&i!==void 0?i:{}:J(t)?t:{},d={};de(r)||(d=r??{}),J(e)&&!de(t)&&(d=t??{});var v=o.find(de);return[a,s,d,v]}function Rt(e,t,r,n,i){var o,a,s=null,d=null,v=[e,t,r,n,i],y=v.filter(oe);y[0]!==void 0&&y[1]!==void 0&&(s=y[0],d=y[1]),y.length===1&&(s=null,d=y[0]);var g=v.find(de),b=v.filter(function(I){return d===null?J(I):J(I)||I===null}),m=(o=b[0])!==null&&o!==void 0?o:{},_=(a=b[1])!==null&&a!==void 0?a:{};return[s,d,m,_,g]}var Ut=function(e){return function(){for(var t,r,n,i,o,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=null;d=(n=(t=a.find(oe))!==null&&t!==void 0?t:(r=a.find(et))===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:e.id();var v=a.filter(function(m){return d===null?J(m):J(m)||m===null}),y=(i=v[0])!==null&&i!==void 0?i:{},g=(o=v[1])!==null&&o!==void 0?o:{},b=a.find(de);return[d,y,g,b]}};function gn(e,t,r,n){et(e)&&(e=e.toString()),et(t)&&(t=t.toString());var i=[e,t,r,n],o=i.filter(oe),a=o[0],s=a===void 0?e:a,d=o[1],v=d===void 0?null:d,y=i.filter(J)[0],g=y===void 0?{}:y,b=i.find(de);return[s,v,g,b]}function dt(){return typeof window<"u"}function Jo(){return!dt()}function bn(){return dt()?window.navigator.onLine:!0}function xe(){return!bn()}function _n(e,t){return t=t||{},new Promise(function(r,n){var i=new XMLHttpRequest,o=[],a=[],s={},d=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:d,headers:{keys:function(){return o},entries:function(){return a},get:function(y){return s[y.toLowerCase()]},has:function(y){return y.toLowerCase()in s}}}};for(var v in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(y,g,b){o.push(g=g.toLowerCase()),a.push([g,b]),s[g]=s[g]?s[g]+","+b:b}),r(d())},i.onerror=n,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(v,t.headers[v]);i.send(t.body||null)})}var pt=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},Re=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=pt();return(r&&r.fetch||_n).apply(void 0,e)},ye="1.53.2";/*! js-cookie v3.0.1 | MIT */function Fe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var wn={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function tt(e,t){function r(i,o,a){if(!(typeof document>"u")){a=Fe({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var d in a)a[d]&&(s+="; "+d,a[d]!==!0&&(s+="="+a[d].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var d=o[s].split("="),v=d.slice(1).join("=");try{var y=decodeURIComponent(d[0]);if(a[y]=e.read(v,y),i===y)break}catch{}}return i?a[i]:a}}return Object.create({set:r,get:n,remove:function(i,o){r(i,"",Fe({},o,{expires:-1}))},withAttributes:function(i){return tt(this.converter,Fe({},this.attributes,i))},withConverter:function(i){return tt(Fe({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var $=tt(wn,{path:"/"});function Sn(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return e}}function In(e){var t=e.hostname,r=t.split("."),n=r[r.length-1],i=[];if(r.length===4&&parseInt(n,10)>0||r.length<=1)return i;for(var o=r.length-2;o>=0;--o)i.push(r.slice(o).join("."));return i}function An(e){try{return new URL(e)}catch{return}}function rr(e){var t=An(e);if(t)for(var r=In(t),n=0;n<r.length;++n){var i="__tld__",o=r[n],a={domain:"."+o};try{if($.set(i,"1",a),$.get(i))return $.remove(i,a),o}catch{return}}}function ht(e){for(var t=e.constructor.prototype,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var i=n[r];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);o&&typeof o.value=="function"&&(e[i]=e[i].bind(e))}}return e}var ue={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},vt=function(){function e(){this.cache={}}return e.prototype.get=function(t){return this.cache[t]},e.prototype.set=function(t,r){this.cache[t]=r},e.prototype.remove=function(t){delete this.cache[t]},Object.defineProperty(e.prototype,"type",{get:function(){return"memory"},enumerable:!1,configurable:!0}),e}(),xn=365,Bt=function(e){U(t,e);function t(r){r===void 0&&(r=t.defaults);var n=e.call(this)||this;return n.options=w(w({},t.defaults),r),n}return t.available=function(){try{var r="ajs_cookies_check";$.set(r,"test");var n=document.cookie.includes(r);return $.remove(r),n}catch{return!1}},Object.defineProperty(t,"defaults",{get:function(){return{maxage:xn,domain:rr(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(r){try{var n=$.get(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}}catch{return null}},t.prototype.set=function(r,n){typeof n=="string"?$.set(r,n,this.opts()):n===null?$.remove(r,this.opts()):$.set(r,JSON.stringify(n),this.opts())},t.prototype.remove=function(r){return $.remove(r,this.opts())},Object.defineProperty(t.prototype,"type",{get:function(){return"cookie"},enumerable:!1,configurable:!0}),t}(vt),Ge=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},$t=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.available=function(){var r="test";try{return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch{return!1}},t.prototype.get=function(r){try{var n=localStorage.getItem(r);if(n===null)return null;try{return JSON.parse(n)}catch{return n}}catch{return Ge(r,"unavailable"),null}},t.prototype.set=function(r,n){try{localStorage.setItem(r,JSON.stringify(n))}catch{Ge(r,"full")}},t.prototype.remove=function(r){try{return localStorage.removeItem(r)}catch{Ge(r,"unavailable")}},Object.defineProperty(t.prototype,"type",{get:function(){return"localStorage"},enumerable:!1,configurable:!0}),t}(vt),Ae=function(){function e(t,r){this.storageOptions=r,this.enabledStores=t}return e.prototype.getStores=function(t){var r=this,n=[];return this.enabledStores.filter(function(i){return!t||(t==null?void 0:t.includes(i))}).forEach(function(i){var o=r.storageOptions[i];o!==void 0&&n.push(o)}),n},e.prototype.getAndSync=function(t,r){var n=this.get(t,r),i=typeof n=="number"?n.toString():n;return this.set(t,i,r),i},e.prototype.get=function(t,r){for(var n=null,i=0,o=this.getStores(r);i<o.length;i++){var a=o[i];if(n=a.get(t),n)return n}return null},e.prototype.set=function(t,r,n){for(var i=0,o=this.getStores(n);i<o.length;i++){var a=o[i];a.set(t,r)}},e.prototype.clear=function(t,r){for(var n=0,i=this.getStores(r);n<i.length;n++){var o=i[n];o.remove(t)}},e}();function yt(e){return{cookie:Bt.available()?new Bt(e):void 0,localStorage:$t.available()?new $t:void 0,memory:new vt}}var nr=function(){function e(t,r){t===void 0&&(t=ue);var n=this,i,o,a,s;this.options={},this.id=function(m){if(n.options.disable)return null;var _=n.identityStore.getAndSync(n.idKey);if(m!==void 0){n.identityStore.set(n.idKey,m);var I=m!==_&&_!==null&&m!==null;I&&n.anonymousId(null)}var S=n.identityStore.getAndSync(n.idKey);if(S)return S;var h=n.legacyUserStore.get(ue.cookie.oldKey);return h?typeof h=="object"?h.id:h:null},this.anonymousId=function(m){var _,I;if(n.options.disable)return null;if(m===void 0){var S=(_=n.identityStore.getAndSync(n.anonKey))!==null&&_!==void 0?_:(I=n.legacySIO())===null||I===void 0?void 0:I[0];if(S)return S}return m===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,m??ft()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(m){var _;if(!n.options.disable)return m===null&&(m={}),m&&n.traitsStore.set(n.traitsKey,m??{}),(_=n.traitsStore.get(n.traitsKey))!==null&&_!==void 0?_:{}},this.options=t,this.cookieOptions=r,this.idKey=(o=(i=t.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:ue.cookie.key,this.traitsKey=(s=(a=t.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:ue.localStorage.key,this.anonKey="ajs_anonymous_id";var d=t.disable===!0,v=t.persist!==!1,y=d?[]:v?["localStorage","cookie","memory"]:["memory"],g=yt(r);t.localStorageFallbackDisabled&&(y=y.filter(function(m){return m!=="localStorage"})),this.identityStore=new Ae(y,g),this.legacyUserStore=new Ae(y.filter(function(m){return m!=="localStorage"&&m!=="memory"}),g),this.traitsStore=new Ae(y.filter(function(m){return m!=="cookie"}),g);var b=this.legacyUserStore.get(ue.cookie.oldKey);b&&typeof b=="object"&&(b.id&&this.id(b.id),b.traits&&this.traits(b.traits)),ht(this)}return e.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var r=t.split("----"),n=r[0],i=r[1];return[n,i]},e.prototype.identify=function(t,r){if(!this.options.disable){r=r??{};var n=this.id();(n===null||n===t)&&(r=w(w({},this.traits()),r)),t&&this.id(t),this.traits(r)}},e.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},e.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},e.prototype.load=function(){return new e(this.options,this.cookieOptions)},e.prototype.save=function(){return!0},e.defaults=ue,e}(),En={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},On=function(e){U(t,e);function t(r,n){r===void 0&&(r=En);var i=e.call(this,r,n)||this;return i.anonymousId=function(o){},ht(i),i}return t}(nr),we;function Pn(){if(we)return we;var e=rr(window.location.href);return we={expires:31536e6,secure:!1,path:"/"},e&&(we.domain=e),we}var Cn="npm";function ir(){return Cn}function Mn(){var e=$.get("_ga");if(e&&e.startsWith("amp"))return e}function Fn(e){return e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&"),e.split("&").reduce(function(t,r){var n=r.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.substr(4);s==="campaign"&&(s="name"),t[s]=Sn(a)}return t},{})}function Dn(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&");for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var o=i[n],a=o.split("="),s=a[0],d=a[1];if(t[s])return{id:d,type:t[s]}}}function Tn(e,t,r){var n=new Ae(r?[]:["cookie"],yt(Pn())),i=n.get("s:context.referrer"),o=Dn(e);o=o??i,o&&(t&&(t.referrer=w(w({},t.referrer),o)),n.set("s:context.referrer",o))}function Nn(e,t,r,n){var i,o,a,s,d,v,y=e.user();t.context=(o=(i=t.context)!==null&&i!==void 0?i:t.options)!==null&&o!==void 0?o:{};var g=t.context,b=typeof((a=g.page)===null||a===void 0?void 0:a.search)=="string"?(s=g.page)===null||s===void 0?void 0:s.search:"";delete t.options,t.writeKey=r==null?void 0:r.apiKey,g.userAgent=navigator.userAgent;var m=navigator.userLanguage||navigator.language;if(typeof g.locale>"u"&&typeof m<"u"&&(g.locale=m),!g.library){var _=ir();_==="web"?g.library={name:"analytics.js",version:"next-".concat(ye)}:g.library={name:"analytics.js",version:"npm:next-".concat(ye)}}b&&!g.campaign&&(g.campaign=Fn(b)),Tn(b,g,(d=e.options.disableClientPersistence)!==null&&d!==void 0?d:!1),t.userId=t.userId||y.id(),t.anonymousId=t.anonymousId||y.anonymousId(),t.sentAt=new Date;var I=e.queue.failedInitializations||[];I.length>0&&(t._metadata={failedInitializations:I});var S=[],h=[];for(var p in n){var c=n[p];p==="Segment.io"&&S.push(p),c.bundlingStatus==="bundled"&&S.push(p),c.bundlingStatus==="unbundled"&&h.push(p)}for(var u=0,f=(r==null?void 0:r.unbundledIntegrations)||[];u<f.length;u++){var l=f[u];h.includes(l)||h.push(l)}var O=(v=r==null?void 0:r.maybeBundledConfigIds)!==null&&v!==void 0?v:{},C=[];S.sort().forEach(function(j){var H;((H=O[j])!==null&&H!==void 0?H:[]).forEach(function(Ce){C.push(Ce)})}),(r==null?void 0:r.addBundledMetadata)!==!1&&(t._metadata=w(w({},t._metadata),{bundled:S.sort(),unbundled:h.sort(),bundledIds:C}));var P=Mn();return P&&(g.amp={id:P}),t}var or="api.segment.io/v1",jn=function(e,t,r){var n=t.reduce(function(i,o){var a=o.split(":"),s=a[0],d=a[1];return i[s]=d,i},{});return{type:"Counter",metric:e,value:1,tags:w(w({},n),{library:"analytics.js",library_version:r==="web"?"next-".concat(ye):"npm:next-".concat(ye)})}};function Qe(e){console.error("Error sending segment performance metrics",e)}var kn=function(){function e(t){var r=this,n,i,o,a;if(this.host=(n=t==null?void 0:t.host)!==null&&n!==void 0?n:or,this.sampleRate=(i=t==null?void 0:t.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=t==null?void 0:t.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=t==null?void 0:t.maxQueueSize)!==null&&a!==void 0?a:20,this.queue=[],this.sampleRate>0){var s=!1,d=function(){s||(s=!0,r.flush().catch(Qe),s=!1,setTimeout(d,r.flushTimer))};d()}}return e.prototype.increment=function(t,r){if(t.includes("analytics_js.")&&r.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=jn(t,r,ir());this.queue.push(n),t.includes("error")&&this.flush().catch(Qe)}},e.prototype.flush=function(){return A(this,void 0,void 0,function(){var t=this;return x(this,function(r){switch(r.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){Qe(n),t.sampleRate=0})];case 1:return r.sent(),[2]}})})},e.prototype.send=function(){return A(this,void 0,void 0,function(){var t,r,n;return x(this,function(i){return t={series:this.queue},this.queue=[],r={"Content-Type":"text/plain"},n="https://".concat(this.host,"/m"),[2,Re(n,{headers:r,body:JSON.stringify(t),method:"POST"})]})})},e}(),De,ar=function(e){U(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.initRemoteMetrics=function(r){De=new kn(r)},t.prototype.increment=function(r,n,i){e.prototype.increment.call(this,r,n,i),De==null||De.increment(r,i??[])},t}(tr),pe=function(e){U(t,e);function t(r,n){return e.call(this,r,n,new ar)||this}return t.system=function(){return new this({type:"track",event:"system"})},t}(ke),sr={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(h,p){var c=h[0],u=h[1],f=h[2],l=h[3];c+=(u&f|~u&l)+p[0]-680876936|0,c=(c<<7|c>>>25)+u|0,l+=(c&u|~c&f)+p[1]-389564586|0,l=(l<<12|l>>>20)+c|0,f+=(l&c|~l&u)+p[2]+606105819|0,f=(f<<17|f>>>15)+l|0,u+=(f&l|~f&c)+p[3]-1044525330|0,u=(u<<22|u>>>10)+f|0,c+=(u&f|~u&l)+p[4]-176418897|0,c=(c<<7|c>>>25)+u|0,l+=(c&u|~c&f)+p[5]+1200080426|0,l=(l<<12|l>>>20)+c|0,f+=(l&c|~l&u)+p[6]-1473231341|0,f=(f<<17|f>>>15)+l|0,u+=(f&l|~f&c)+p[7]-45705983|0,u=(u<<22|u>>>10)+f|0,c+=(u&f|~u&l)+p[8]+1770035416|0,c=(c<<7|c>>>25)+u|0,l+=(c&u|~c&f)+p[9]-1958414417|0,l=(l<<12|l>>>20)+c|0,f+=(l&c|~l&u)+p[10]-42063|0,f=(f<<17|f>>>15)+l|0,u+=(f&l|~f&c)+p[11]-1990404162|0,u=(u<<22|u>>>10)+f|0,c+=(u&f|~u&l)+p[12]+1804603682|0,c=(c<<7|c>>>25)+u|0,l+=(c&u|~c&f)+p[13]-40341101|0,l=(l<<12|l>>>20)+c|0,f+=(l&c|~l&u)+p[14]-1502002290|0,f=(f<<17|f>>>15)+l|0,u+=(f&l|~f&c)+p[15]+1236535329|0,u=(u<<22|u>>>10)+f|0,c+=(u&l|f&~l)+p[1]-165796510|0,c=(c<<5|c>>>27)+u|0,l+=(c&f|u&~f)+p[6]-1069501632|0,l=(l<<9|l>>>23)+c|0,f+=(l&u|c&~u)+p[11]+643717713|0,f=(f<<14|f>>>18)+l|0,u+=(f&c|l&~c)+p[0]-373897302|0,u=(u<<20|u>>>12)+f|0,c+=(u&l|f&~l)+p[5]-701558691|0,c=(c<<5|c>>>27)+u|0,l+=(c&f|u&~f)+p[10]+38016083|0,l=(l<<9|l>>>23)+c|0,f+=(l&u|c&~u)+p[15]-660478335|0,f=(f<<14|f>>>18)+l|0,u+=(f&c|l&~c)+p[4]-405537848|0,u=(u<<20|u>>>12)+f|0,c+=(u&l|f&~l)+p[9]+568446438|0,c=(c<<5|c>>>27)+u|0,l+=(c&f|u&~f)+p[14]-1019803690|0,l=(l<<9|l>>>23)+c|0,f+=(l&u|c&~u)+p[3]-187363961|0,f=(f<<14|f>>>18)+l|0,u+=(f&c|l&~c)+p[8]+1163531501|0,u=(u<<20|u>>>12)+f|0,c+=(u&l|f&~l)+p[13]-1444681467|0,c=(c<<5|c>>>27)+u|0,l+=(c&f|u&~f)+p[2]-51403784|0,l=(l<<9|l>>>23)+c|0,f+=(l&u|c&~u)+p[7]+1735328473|0,f=(f<<14|f>>>18)+l|0,u+=(f&c|l&~c)+p[12]-1926607734|0,u=(u<<20|u>>>12)+f|0,c+=(u^f^l)+p[5]-378558|0,c=(c<<4|c>>>28)+u|0,l+=(c^u^f)+p[8]-2022574463|0,l=(l<<11|l>>>21)+c|0,f+=(l^c^u)+p[11]+1839030562|0,f=(f<<16|f>>>16)+l|0,u+=(f^l^c)+p[14]-35309556|0,u=(u<<23|u>>>9)+f|0,c+=(u^f^l)+p[1]-1530992060|0,c=(c<<4|c>>>28)+u|0,l+=(c^u^f)+p[4]+1272893353|0,l=(l<<11|l>>>21)+c|0,f+=(l^c^u)+p[7]-155497632|0,f=(f<<16|f>>>16)+l|0,u+=(f^l^c)+p[10]-1094730640|0,u=(u<<23|u>>>9)+f|0,c+=(u^f^l)+p[13]+681279174|0,c=(c<<4|c>>>28)+u|0,l+=(c^u^f)+p[0]-358537222|0,l=(l<<11|l>>>21)+c|0,f+=(l^c^u)+p[3]-722521979|0,f=(f<<16|f>>>16)+l|0,u+=(f^l^c)+p[6]+76029189|0,u=(u<<23|u>>>9)+f|0,c+=(u^f^l)+p[9]-640364487|0,c=(c<<4|c>>>28)+u|0,l+=(c^u^f)+p[12]-421815835|0,l=(l<<11|l>>>21)+c|0,f+=(l^c^u)+p[15]+530742520|0,f=(f<<16|f>>>16)+l|0,u+=(f^l^c)+p[2]-995338651|0,u=(u<<23|u>>>9)+f|0,c+=(f^(u|~l))+p[0]-198630844|0,c=(c<<6|c>>>26)+u|0,l+=(u^(c|~f))+p[7]+1126891415|0,l=(l<<10|l>>>22)+c|0,f+=(c^(l|~u))+p[14]-1416354905|0,f=(f<<15|f>>>17)+l|0,u+=(l^(f|~c))+p[5]-57434055|0,u=(u<<21|u>>>11)+f|0,c+=(f^(u|~l))+p[12]+1700485571|0,c=(c<<6|c>>>26)+u|0,l+=(u^(c|~f))+p[3]-1894986606|0,l=(l<<10|l>>>22)+c|0,f+=(c^(l|~u))+p[10]-1051523|0,f=(f<<15|f>>>17)+l|0,u+=(l^(f|~c))+p[1]-2054922799|0,u=(u<<21|u>>>11)+f|0,c+=(f^(u|~l))+p[8]+1873313359|0,c=(c<<6|c>>>26)+u|0,l+=(u^(c|~f))+p[15]-30611744|0,l=(l<<10|l>>>22)+c|0,f+=(c^(l|~u))+p[6]-1560198380|0,f=(f<<15|f>>>17)+l|0,u+=(l^(f|~c))+p[13]+1309151649|0,u=(u<<21|u>>>11)+f|0,c+=(f^(u|~l))+p[4]-145523070|0,c=(c<<6|c>>>26)+u|0,l+=(u^(c|~f))+p[11]-1120210379|0,l=(l<<10|l>>>22)+c|0,f+=(c^(l|~u))+p[2]+718787259|0,f=(f<<15|f>>>17)+l|0,u+=(l^(f|~c))+p[9]-343485551|0,u=(u<<21|u>>>11)+f|0,h[0]=c+h[0]|0,h[1]=u+h[1]|0,h[2]=f+h[2]|0,h[3]=l+h[3]|0}function o(h){var p=[],c;for(c=0;c<64;c+=4)p[c>>2]=h.charCodeAt(c)+(h.charCodeAt(c+1)<<8)+(h.charCodeAt(c+2)<<16)+(h.charCodeAt(c+3)<<24);return p}function a(h){var p=[],c;for(c=0;c<64;c+=4)p[c>>2]=h[c]+(h[c+1]<<8)+(h[c+2]<<16)+(h[c+3]<<24);return p}function s(h){var p=h.length,c=[1732584193,-271733879,-1732584194,271733878],u,f,l,O,C,P;for(u=64;u<=p;u+=64)i(c,o(h.substring(u-64,u)));for(h=h.substring(u-64),f=h.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<f;u+=1)l[u>>2]|=h.charCodeAt(u)<<(u%4<<3);if(l[u>>2]|=128<<(u%4<<3),u>55)for(i(c,l),u=0;u<16;u+=1)l[u]=0;return O=p*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(O[2],16),P=parseInt(O[1],16)||0,l[14]=C,l[15]=P,i(c,l),c}function d(h){var p=h.length,c=[1732584193,-271733879,-1732584194,271733878],u,f,l,O,C,P;for(u=64;u<=p;u+=64)i(c,a(h.subarray(u-64,u)));for(h=u-64<p?h.subarray(u-64):new Uint8Array(0),f=h.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<f;u+=1)l[u>>2]|=h[u]<<(u%4<<3);if(l[u>>2]|=128<<(u%4<<3),u>55)for(i(c,l),u=0;u<16;u+=1)l[u]=0;return O=p*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(O[2],16),P=parseInt(O[1],16)||0,l[14]=C,l[15]=P,i(c,l),c}function v(h){var p="",c;for(c=0;c<4;c+=1)p+=n[h>>c*8+4&15]+n[h>>c*8&15];return p}function y(h){var p;for(p=0;p<h.length;p+=1)h[p]=v(h[p]);return h.join("")}y(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function h(p,c){return p=p|0||0,p<0?Math.max(p+c,0):Math.min(p,c)}ArrayBuffer.prototype.slice=function(p,c){var u=this.byteLength,f=h(p,u),l=u,O,C,P,j;return c!==r&&(l=h(c,u)),f>l?new ArrayBuffer(0):(O=l-f,C=new ArrayBuffer(O),P=new Uint8Array(C),j=new Uint8Array(this,f,O),P.set(j),C)}}();function g(h){return/[\u0080-\uFFFF]/.test(h)&&(h=unescape(encodeURIComponent(h))),h}function b(h,p){var c=h.length,u=new ArrayBuffer(c),f=new Uint8Array(u),l;for(l=0;l<c;l+=1)f[l]=h.charCodeAt(l);return p?f:u}function m(h){return String.fromCharCode.apply(null,new Uint8Array(h))}function _(h,p,c){var u=new Uint8Array(h.byteLength+p.byteLength);return u.set(new Uint8Array(h)),u.set(new Uint8Array(p),h.byteLength),c?u:u.buffer}function I(h){var p=[],c=h.length,u;for(u=0;u<c-1;u+=2)p.push(parseInt(h.substr(u,2),16));return String.fromCharCode.apply(String,p)}function S(){this.reset()}return S.prototype.append=function(h){return this.appendBinary(g(h)),this},S.prototype.appendBinary=function(h){this._buff+=h,this._length+=h.length;var p=this._buff.length,c;for(c=64;c<=p;c+=64)i(this._hash,o(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},S.prototype.end=function(h){var p=this._buff,c=p.length,u,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l;for(u=0;u<c;u+=1)f[u>>2]|=p.charCodeAt(u)<<(u%4<<3);return this._finish(f,c),l=y(this._hash),h&&(l=I(l)),this.reset(),l},S.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},S.prototype.setState=function(h){return this._buff=h.buff,this._length=h.length,this._hash=h.hash,this},S.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},S.prototype._finish=function(h,p){var c=p,u,f,l;if(h[c>>2]|=128<<(c%4<<3),c>55)for(i(this._hash,h),c=0;c<16;c+=1)h[c]=0;u=this._length*8,u=u.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(u[2],16),l=parseInt(u[1],16)||0,h[14]=f,h[15]=l,i(this._hash,h)},S.hash=function(h,p){return S.hashBinary(g(h),p)},S.hashBinary=function(h,p){var c=s(h),u=y(c);return p?I(u):u},S.ArrayBuffer=function(){this.reset()},S.ArrayBuffer.prototype.append=function(h){var p=_(this._buff.buffer,h,!0),c=p.length,u;for(this._length+=h.byteLength,u=64;u<=c;u+=64)i(this._hash,a(p.subarray(u-64,u)));return this._buff=u-64<c?new Uint8Array(p.buffer.slice(u-64)):new Uint8Array(0),this},S.ArrayBuffer.prototype.end=function(h){var p=this._buff,c=p.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f,l;for(f=0;f<c;f+=1)u[f>>2]|=p[f]<<(f%4<<3);return this._finish(u,c),l=y(this._hash),h&&(l=I(l)),this.reset(),l},S.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.ArrayBuffer.prototype.getState=function(){var h=S.prototype.getState.call(this);return h.buff=m(h.buff),h},S.ArrayBuffer.prototype.setState=function(h){return h.buff=b(h.buff,!0),S.prototype.setState.call(this,h)},S.ArrayBuffer.prototype.destroy=S.prototype.destroy,S.ArrayBuffer.prototype._finish=S.prototype._finish,S.ArrayBuffer.hash=function(h,p){var c=d(new Uint8Array(h)),u=y(c);return p?I(u):u},S})})(sr);var Ln=sr.exports;const Rn=Fr(Ln);var Un=function(){function e(t){this.user=t}return e.prototype.track=function(t,r,n,i){return this.normalize(w(w({},this.baseEvent()),{event:t,type:"track",properties:r,options:w({},n),integrations:w({},i)}))},e.prototype.page=function(t,r,n,i,o){var a,s={type:"page",properties:w({},n),options:w({},i),integrations:w({},o)};return t!==null&&(s.category=t,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=t),r!==null&&(s.name=r),this.normalize(w(w({},this.baseEvent()),s))},e.prototype.screen=function(t,r,n,i,o){var a={type:"screen",properties:w({},n),options:w({},i),integrations:w({},o)};return t!==null&&(a.category=t),r!==null&&(a.name=r),this.normalize(w(w({},this.baseEvent()),a))},e.prototype.identify=function(t,r,n,i){return this.normalize(w(w({},this.baseEvent()),{type:"identify",userId:t,traits:r,options:w({},n),integrations:w({},i)}))},e.prototype.group=function(t,r,n,i){return this.normalize(w(w({},this.baseEvent()),{type:"group",traits:r,options:w({},n),integrations:w({},i),groupId:t}))},e.prototype.alias=function(t,r,n,i){var o={userId:t,type:"alias",options:w({},n),integrations:w({},i)};return r!==null&&(o.previousId=r),t===void 0?this.normalize(w(w({},o),this.baseEvent())):this.normalize(w(w({},this.baseEvent()),o))},e.prototype.baseEvent=function(){var t={integrations:{},options:{}},r=this.user;return r.id()&&(t.userId=r.id()),r.anonymousId()&&(t.anonymousId=r.anonymousId()),t},e.prototype.context=function(t){var r,n,i,o=["integrations","anonymousId","timestamp","userId"],a=(r=t.options)!==null&&r!==void 0?r:{};delete a.integrations;var s=Object.keys(a),d=(i=(n=t.options)===null||n===void 0?void 0:n.context)!==null&&i!==void 0?i:{},v={};return s.forEach(function(y){y!=="context"&&(o.includes(y)?je(v,y,a[y]):je(d,y,a[y]))}),[d,v]},e.prototype.normalize=function(t){var r,n,i;!((r=t.options)===null||r===void 0)&&r.anonymousId&&this.user.anonymousId(t.options.anonymousId);var o=Object.keys((n=t.integrations)!==null&&n!==void 0?n:{}).reduce(function(_,I){var S,h;return w(w({},_),(S={},S[I]=!!(!((h=t.integrations)===null||h===void 0)&&h[I]),S))},{}),a=w(w({},o),(i=t.options)===null||i===void 0?void 0:i.integrations),s=this.context(t),d=s[0],v=s[1];t.options;var y=Dr(t,["options"]),g=w(w(w({timestamp:new Date},y),{context:d,integrations:a}),v),b="ajs-next-"+Rn.hash(JSON.stringify(g)+ft()),m=w(w({},g),{messageId:b});return m},e}(),G={getItem:function(){},setItem:function(){},removeItem:function(){}};try{G=dt()&&window.localStorage?window.localStorage:G}catch(e){console.warn("Unable to access localStorage",e)}function ur(e){var t=G.getItem(e);return(t?JSON.parse(t):[]).map(function(r){return new pe(r.event,r.id)})}function Bn(e,t){var r=ur(e),n=k(k([],t,!0),r,!0),i=n.reduce(function(o,a){var s;return w(w({},o),(s={},s[a.id]=a,s))},{});G.setItem(e,JSON.stringify(Object.values(i)))}function cr(e){var t=G.getItem(e);return t?JSON.parse(t):{}}function $n(e,t){var r=cr(e);G.setItem(e,JSON.stringify(w(w({},r),t)))}function zt(e){G.removeItem(e)}var zn=function(){return new Date().getTime()};function rt(e,t,r){r===void 0&&(r=0);var n=50,i="persisted-queue:v1:".concat(e,":lock"),o=function(v){return new Date().getTime()>v},a=G.getItem(i),s=a?JSON.parse(a):null,d=s===null||o(s);if(d){G.setItem(i,JSON.stringify(zn()+n)),t(),G.removeItem(i);return}!d&&r<3?setTimeout(function(){rt(e,t,r+1)},n):console.error("Unable to retrieve lock")}var mt=function(e){U(t,e);function t(r,n){var i=e.call(this,r,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),s=[],d={};return rt(n,function(){try{s=ur(o),d=cr(a),zt(o),zt(a),i.queue=k(k([],s,!0),i.queue,!0),i.seen=w(w({},d),i.seen)}catch(v){console.error(v)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var v=k(k([],i.queue,!0),i.future,!0);try{rt(n,function(){Bn(o,v),$n(a,i.seen)})}catch(y){console.error(y)}}}),i}return t}(lt),qn=function(e){U(t,e);function t(r){return e.call(this,typeof r=="string"?new mt(4,r):r)||this}return t.prototype.flush=function(){return A(this,void 0,void 0,function(){return x(this,function(r){return xe()?[2,[]]:[2,e.prototype.flush.call(this)]})})},t}(hn),X="This is being deprecated and will be not be available in future releases of Analytics JS",We=pt(),He=We==null?void 0:We.analytics;function Kn(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=t?4:1,i=r?new lt(n,[]):new mt(n,e);return new qn(i)}function V(){console.warn(X)}var Vn=function(e){U(t,e);function t(r,n,i,o,a){var s=this,d,v,y;s=e.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=V,s.addIntegrationMiddleware=V,s.listeners=V,s.addEventListener=V,s.removeAllListeners=V,s.removeListener=V,s.removeEventListener=V,s.hasListeners=V,s.add=V,s.addIntegration=V;var g=n==null?void 0:n.cookie,b=(d=n==null?void 0:n.disableClientPersistence)!==null&&d!==void 0?d:!1;return s.settings=r,s.settings.timeout=(v=s.settings.timeout)!==null&&v!==void 0?v:300,s.queue=i??Kn("".concat(r.writeKey,":event-queue"),n==null?void 0:n.retryQueue,b),s._universalStorage=new Ae(b?["memory"]:["localStorage","cookie","memory"],yt(g)),s._user=o??new nr(b?w(w({},n==null?void 0:n.user),{persist:!1}):n==null?void 0:n.user,g).load(),s._group=a??new On(b?w(w({},n==null?void 0:n.group),{persist:!1}):n==null?void 0:n.group,g).load(),s.eventFactory=new Un(s._user),s.integrations=(y=n==null?void 0:n.integrations)!==null&&y!==void 0?y:{},s.options=n??{},ht(s),s}return Object.defineProperty(t.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),t.prototype.track=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,s,d,v,y=this;return x(this,function(g){return i=mn.apply(void 0,r),o=i[0],a=i[1],s=i[2],d=i[3],v=this.eventFactory.track(o,a,s,this.integrations),[2,this._dispatch(v,d).then(function(b){return y.emit("track",o,b.event.properties,b.event.options),b})]})})},t.prototype.page=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,s,d,v,y,g=this;return x(this,function(b){return i=Rt.apply(void 0,r),o=i[0],a=i[1],s=i[2],d=i[3],v=i[4],y=this.eventFactory.page(o,a,s,d,this.integrations),[2,this._dispatch(y,v).then(function(m){return g.emit("page",o,a,m.event.properties,m.event.options),m})]})})},t.prototype.identify=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,s,d,v,y=this;return x(this,function(g){return i=Ut(this._user).apply(void 0,r),o=i[0],a=i[1],s=i[2],d=i[3],this._user.identify(o,a),v=this.eventFactory.identify(this._user.id(),this._user.traits(),s,this.integrations),[2,this._dispatch(v,d).then(function(b){return y.emit("identify",b.event.userId,b.event.traits,b.event.options),b})]})})},t.prototype.group=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length===0)return this._group;var o=Ut(this._group).apply(void 0,n),a=o[0],s=o[1],d=o[2],v=o[3];this._group.identify(a,s);var y=this._group.id(),g=this._group.traits(),b=this.eventFactory.group(y,g,d,this.integrations);return this._dispatch(b,v).then(function(m){return r.emit("group",m.event.groupId,m.event.traits,m.event.options),m})},t.prototype.alias=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,s,d,v,y=this;return x(this,function(g){return i=gn.apply(void 0,r),o=i[0],a=i[1],s=i[2],d=i[3],v=this.eventFactory.alias(o,a,s,this.integrations),[2,this._dispatch(v,d).then(function(b){return y.emit("alias",o,a,b.event.options),b})]})})},t.prototype.screen=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,s,d,v,y,g=this;return x(this,function(b){return i=Rt.apply(void 0,r),o=i[0],a=i[1],s=i[2],d=i[3],v=i[4],y=this.eventFactory.screen(o,a,s,d,this.integrations),[2,this._dispatch(y,v).then(function(m){return g.emit("screen",o,a,m.event.properties,m.event.options),m})]})})},t.prototype.trackClick=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return x(this,function(a){switch(a.label){case 0:return[4,z(()=>import("./auto-track-5c7effbe.js"),["assets/auto-track-5c7effbe.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"])];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,k([this],r,!1))]}})})},t.prototype.trackLink=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return x(this,function(a){switch(a.label){case 0:return[4,z(()=>import("./auto-track-5c7effbe.js"),["assets/auto-track-5c7effbe.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"])];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,k([this],r,!1))]}})})},t.prototype.trackSubmit=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return x(this,function(a){switch(a.label){case 0:return[4,z(()=>import("./auto-track-5c7effbe.js"),["assets/auto-track-5c7effbe.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"])];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,k([this],r,!1))]}})})},t.prototype.trackForm=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return x(this,function(a){switch(a.label){case 0:return[4,z(()=>import("./auto-track-5c7effbe.js"),["assets/auto-track-5c7effbe.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"])];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,k([this],r,!1))]}})})},t.prototype.register=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a=this;return x(this,function(s){switch(s.label){case 0:return i=pe.system(),o=r.map(function(d){return a.queue.register(i,d,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},t.prototype.deregister=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a=this;return x(this,function(s){switch(s.label){case 0:return i=pe.system(),o=r.map(function(d){var v=a.queue.plugins.find(function(y){return y.name===d});if(v)return a.queue.deregister(i,v,a);i.log("warn","plugin ".concat(d," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},t.prototype.debug=function(r){return r===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=r,this},t.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},t.prototype.timeout=function(r){this.settings.timeout=r},t.prototype._dispatch=function(r,n){return A(this,void 0,void 0,function(){var i;return x(this,function(o){return i=new pe(r),xe()&&!this.options.retryQueue?[2,i]:[2,yn(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},t.prototype.addSourceMiddleware=function(r){return A(this,void 0,void 0,function(){var n=this;return x(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return A(n,void 0,void 0,function(){var o,a,s;return x(this,function(d){switch(d.label){case 0:return[4,z(()=>Promise.resolve().then(()=>zi),void 0)];case 1:return o=d.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(v){if(v.type==="destination")return a[v.name]=!0}),s=o(r,a),[4,this.register(s)];case 2:return d.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},t.prototype.addDestinationMiddleware=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.queue.plugins.filter(function(a){return a.name.toLowerCase()===r.toLowerCase()});return o.forEach(function(a){a.addMiddleware.apply(a,n)}),Promise.resolve(this)},t.prototype.setAnonymousId=function(r){return this._user.anonymousId(r)},t.prototype.queryString=function(r){return A(this,void 0,void 0,function(){var n;return x(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,z(()=>import("./index-009932d7.js"),["assets/index-009932d7.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"])];case 1:return n=i.sent().queryString,[2,n(this,r)]}})})},t.prototype.use=function(r){return r(this),this},t.prototype.ready=function(r){return r===void 0&&(r=function(n){return n}),A(this,void 0,void 0,function(){return x(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return r(i),i})]})})},t.prototype.noConflict=function(){return console.warn(X),window.analytics=He??this,this},t.prototype.normalize=function(r){return console.warn(X),this.eventFactory.normalize(r)},Object.defineProperty(t.prototype,"failedInitializations",{get:function(){return console.warn(X),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VERSION",{get:function(){return ye},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r,n){return A(this,void 0,void 0,function(){return x(this,function(i){return console.warn(X),[2,Promise.resolve(this)]})})},t.prototype.pageview=function(r){return A(this,void 0,void 0,function(){return x(this,function(n){switch(n.label){case 0:return console.warn(X),[4,this.page({path:r})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"plugins",{get:function(){var r;return console.warn(X),(r=this._plugins)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Integrations",{get:function(){console.warn(X);var r=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var s=a.Integration;return s?(n[i.name]=s,n):(n[i.name]=a,n)},{});return r},enumerable:!1,configurable:!0}),t.prototype.push=function(r){var n=this,i=r.shift();i&&!n[i]||n[i].apply(this,r)},t}(ut);function lr(){return typeof process>"u"||!process.env?{}:process.env}var Jn=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,Gn=function(){var e,t=Array.prototype.slice.call(document.querySelectorAll("script"));return t.forEach(function(r){var n,i=(n=r.getAttribute("src"))!==null&&n!==void 0?n:"",o=Jn.exec(i);o&&o[1]&&(e=o[1])}),e},Ne,Qn=function(){var e,t=Ne??((e=window.analytics)===null||e===void 0?void 0:e._cdn);return t},Wn=function(e){window.analytics&&(window.analytics._cdn=e),Ne=e},gt=function(){var e=Qn();if(e)return e;var t=Gn();return t||"https://cdn.segment.com"},Go=function(){var e=gt();return"".concat(e,"/next-integrations")};function Hn(e,t){var r,n=Object.entries((r=t.integrations)!==null&&r!==void 0?r:{}).reduce(function(i,o){var a,s,d=o[0],v=o[1];return typeof v=="object"?w(w({},i),(a={},a[d]=v,a)):w(w({},i),(s={},s[d]={},s))},{});return Object.entries(e.integrations).reduce(function(i,o){var a,s=o[0],d=o[1];return w(w({},i),(a={},a[s]=w(w({},d),n[s]),a))},{})}var Yn=function(){var e,t,r=new Promise(function(n,i){e=n,t=i});return{resolve:e,reject:t,promise:r}},Zn=function(e,t){return Object.assign.apply(Object,k([{}],t.map(function(r){var n;if(e&&Object.prototype.hasOwnProperty.call(e,r))return n={},n[r]=e[r],n}),!1))};function fr(){var e=document.querySelector("link[rel='canonical']");if(e)return e.getAttribute("href")||void 0}function Xn(){var e=fr();if(!e)return window.location.pathname;var t=document.createElement("a");t.href=e;var r=t.pathname.startsWith("/")?t.pathname:"/"+t.pathname;return r}function ei(e){e===void 0&&(e="");var t=fr();if(t)return t.includes("?")?t:"".concat(t).concat(e);var r=window.location.href,n=r.indexOf("#");return n===-1?r:r.slice(0,n)}function ti(){return{path:Xn(),referrer:document.referrer,search:location.search,title:document.title,url:ei(location.search)}}function Se(e){var t=e.event;t.context=t.context||{};var r=ti(),n=void 0;return t.type==="page"&&(n=t.properties&&Zn(t.properties,Object.keys(r)),t.properties=w(w(w({},r),t.properties),t.name?{name:t.name}:{})),t.context.page=w(w(w({},r),n),t.context.page),e}var ri={name:"Page Enrichment",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:Se,alias:Se,track:Se,identify:Se,group:Se};function dr(e){var t=Array.prototype.slice.call(window.document.querySelectorAll("script"));return t.find(function(r){return r.src===e})}function Ye(e,t){var r=dr(e);if(r!==void 0){var n=r==null?void 0:r.getAttribute("status");if(n==="loaded")return Promise.resolve(r);if(n==="loading")return new Promise(function(i,o){r.addEventListener("load",function(){return i(r)}),r.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=e,s.async=!0,s.setAttribute("status","loading");for(var d=0,v=Object.entries(t??{});d<v.length;d++){var y=v[d],g=y[0],b=y[1];s.setAttribute(g,b)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(e)))};var m=window.document.getElementsByTagName("script")[0];(a=m.parentElement)===null||a===void 0||a.insertBefore(s,m)})}function Qo(e){var t=dr(e);return t!==void 0&&t.remove(),Promise.resolve()}var ee={},Q={},bt={},pr={exports:{}};(function(e){e.exports=t(r),e.exports.find=e.exports,e.exports.replace=function(s,d,v,y){return t(i).call(this,s,d,v,y),s},e.exports.del=function(s,d,v){return t(n).call(this,s,d,null,v),s};function t(s){return function(d,v,y,g){var b=g&&a(g.normalizer)?g.normalizer:o;v=b(v);for(var m,_=!1;!_;)I();function I(){for(m in d){var S=b(m);if(v.indexOf(S)===0){var h=v.substr(S.length);if(h.charAt(0)==="."||h.length===0){v=h.substr(1);var p=d[m];if(p==null){_=!0;return}if(!v.length){_=!0;return}d=p;return}}}m=void 0,_=!0}if(m)return d==null?d:s(d,m,y)}}function r(s,d){if(s.hasOwnProperty(d))return s[d]}function n(s,d){return s.hasOwnProperty(d)&&delete s[d],s}function i(s,d,v){return s.hasOwnProperty(d)&&(s[d]=v),s}function o(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(s){return typeof s=="function"}})(pr);var Ue=pr.exports,ni=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bt,"__esModule",{value:!0});var Z=ni(Ue);function ce(e,t){return function(){var r=this.traits(),n=this.properties?this.properties():{};return Z.default(r,"address."+e)||Z.default(r,e)||(t?Z.default(r,"address."+t):null)||(t?Z.default(r,t):null)||Z.default(n,"address."+e)||Z.default(n,e)||(t?Z.default(n,"address."+t):null)||(t?Z.default(n,t):null)}}function ii(e){e.zip=ce("postalCode","zip"),e.country=ce("country"),e.street=ce("street"),e.state=ce("state"),e.city=ce("city"),e.region=ce("region")}bt.default=ii;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.clone=void 0;function nt(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=nt(e[r]));return t}else return Array.isArray(e)?e.map(nt):e}Be.clone=nt;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});var oi={Salesforce:!0};function ai(e){return!oi[e]}_t.default=ai;var $e={},hr=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;$e.parse=function(e){var t=[1,5,6,7,11,12],r=hr.exec(e),n=0;if(!r)return new Date(e);for(var i=0,o;o=t[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0,r[4]===" "?n=new Date().getTimezoneOffset():r[9]!=="Z"&&r[10]&&(n=r[11]*60+r[12],r[10]==="+"&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)};$e.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:hr.test(e)};var wt={},si=/\d{13}/;wt.is=function(e){return si.test(e)};wt.parse=function(e){return e=parseInt(e,10),new Date(e)};var St={},ui=/\d{10}/;St.is=function(e){return ui.test(e)};St.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)};var qt=$e,Kt=wt,Vt=St,ci=Object.prototype,vr=ci.toString;function li(e){return vr.call(e)==="[object Date]"}function fi(e){return vr.call(e)==="[object Number]"}var It=function(t){return li(t)?t:fi(t)?new Date(di(t)):qt.is(t)?qt.parse(t):Kt.is(t)?Kt.parse(t):Vt.is(t)?Vt.parse(t):new Date(t)};function di(e){return e<315576e5?e*1e3:e}var Jt=$e,pi=At;function At(e,t){return t===void 0&&(t=!0),e&&typeof e=="object"?hi(e,t):Array.isArray(e)?vi(e,t):Jt.is(e,t)?Jt.parse(e):e}function hi(e,t){return Object.keys(e).forEach(function(r){e[r]=At(e[r],t)}),e}function vi(e,t){return e.forEach(function(r,n){e[n]=At(r,t)}),e}var Ee=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Q,"__esModule",{value:!0});Q.Facade=void 0;var yi=Ee(bt),me=Be,mi=Ee(_t),gi=Ee(It),it=Ee(Ue),bi=Ee(pi);function B(e,t){t=t||{},this.raw=me.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=me.clone(e)),"traverse"in t||(t.traverse=!0),"timestamp"in e?e.timestamp=gi.default(e.timestamp):e.timestamp=new Date,t.traverse&&bi.default(e),this.opts=t,this.obj=e}Q.Facade=B;var M=B.prototype;M.proxy=function(e){var t=e.split(".");e=t.shift();var r=this[e]||this.obj[e];return r&&(typeof r=="function"&&(r=r.call(this)||{}),t.length===0?this.opts.clone?ot(r):r:(r=it.default(r,t.join(".")),this.opts.clone?ot(r):r))};M.field=function(e){var t=this.obj[e];return this.opts.clone?ot(t):t};B.proxy=function(e){return function(){return this.proxy(e)}};B.field=function(e){return function(){return this.field(e)}};B.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?me.clone(r):r]),r||[]}};B.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");if(Array.isArray(r))return r[0]}};M.json=function(){var e=this.opts.clone?me.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e};M.rawEvent=function(){return this.raw};M.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?me.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),i=n[e]||it.default(n,e);return typeof i!="object"&&(i=it.default(this.options(),e)),typeof i=="object"?i:{}}};M.context=M.options;M.enabled=function(e){var t=this.proxy("options.providers.all");typeof t!="boolean"&&(t=this.proxy("options.all")),typeof t!="boolean"&&(t=this.proxy("integrations.all")),typeof t!="boolean"&&(t=!0);var r=t&&mi.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var i=n[e];typeof i=="boolean"?r=i:r=!0}return!!r};M.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};M.active=function(){var e=this.proxy("options.active");return e==null&&(e=!0),e};M.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};M.sessionId=M.anonymousId;M.groupId=B.proxy("options.groupId");M.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("options.traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};M.library=function(){var e=this.proxy("options.library");return e?typeof e=="string"?{name:e,version:null}:e:{name:"unknown",version:null}};M.device=function(){var e=this.proxy("context.device");(typeof e!="object"||e===null)&&(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e};M.userAgent=B.proxy("context.userAgent");M.timezone=B.proxy("context.timezone");M.timestamp=B.field("timestamp");M.channel=B.field("channel");M.ip=B.proxy("context.ip");M.userId=B.field("userId");yi.default(M);function ot(e){return me.clone(e)}var ze={},at={exports:{}};typeof Object.create=="function"?at.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:at.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var ae=at.exports,_i=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ze,"__esModule",{value:!0});ze.Alias=void 0;var wi=_i(ae),yr=Q;function q(e,t){yr.Facade.call(this,e,t)}ze.Alias=q;wi.default(q,yr.Facade);q.prototype.action=function(){return"alias"};q.prototype.type=q.prototype.action;q.prototype.previousId=function(){return this.field("previousId")||this.field("from")};q.prototype.from=q.prototype.previousId;q.prototype.userId=function(){return this.field("userId")||this.field("to")};q.prototype.to=q.prototype.userId;var qe={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});var Si=/.+\@.+\..+/;function Ii(e){return Si.test(e)}ge.default=Ii;var xt=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.Group=void 0;var Ai=xt(ae),xi=xt(ge),Ei=xt(It),be=Q;function Et(e,t){be.Facade.call(this,e,t)}qe.Group=Et;Ai.default(Et,be.Facade);var K=Et.prototype;K.action=function(){return"group"};K.type=K.action;K.groupId=be.Facade.field("groupId");K.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return Ei.default(e)};K.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();if(xi.default(t))return t};K.traits=function(e){var t=this.properties(),r=this.groupId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};K.name=be.Facade.proxy("traits.name");K.industry=be.Facade.proxy("traits.industry");K.employees=be.Facade.proxy("traits.employees");K.properties=function(){return this.field("traits")||this.field("properties")||{}};var Oe={},Ke=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Identify=void 0;var W=Q,he=Ke(Ue),Oi=Ke(ae),Pi=Ke(ge),mr=Ke(It),re=function(e){return e.trim()};function Ot(e,t){W.Facade.call(this,e,t)}Oe.Identify=Ot;Oi.default(Ot,W.Facade);var F=Ot.prototype;F.action=function(){return"identify"};F.type=F.action;F.traits=function(e){var t=this.field("traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e){var i=this[n]==null?this.proxy("traits."+n):this[n]();i!=null&&(t[e[n]]=i,n!==e[n]&&delete t[n])}return t};F.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();if(Pi.default(t))return t};F.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return mr.default(e)};F.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return mr.default(e)};F.companyName=function(){return this.proxy("traits.company.name")};F.name=function(){var e=this.proxy("traits.name");if(typeof e=="string")return re(e);var t=this.firstName(),r=this.lastName();if(t&&r)return re(t+" "+r)};F.firstName=function(){var e=this.proxy("traits.firstName");if(typeof e=="string")return re(e);var t=this.proxy("traits.name");if(typeof t=="string")return re(t).split(" ")[0]};F.lastName=function(){var e=this.proxy("traits.lastName");if(typeof e=="string")return re(e);var t=this.proxy("traits.name");if(typeof t=="string"){var r=re(t).indexOf(" ");if(r!==-1)return re(t.substr(r+1))}};F.uid=function(){return this.userId()||this.username()||this.email()};F.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};F.age=function(){var e=this.birthday(),t=he.default(this.traits(),"age");if(t!=null)return t;if(e instanceof Date){var r=new Date;return r.getFullYear()-e.getFullYear()}};F.avatar=function(){var e=this.traits();return he.default(e,"avatar")||he.default(e,"photoUrl")||he.default(e,"avatarUrl")};F.position=function(){var e=this.traits();return he.default(e,"position")||he.default(e,"jobTitle")};F.username=W.Facade.proxy("traits.username");F.website=W.Facade.one("traits.website");F.websites=W.Facade.multi("traits.website");F.phone=W.Facade.one("traits.phone");F.phones=W.Facade.multi("traits.phone");F.address=W.Facade.proxy("traits.address");F.gender=W.Facade.proxy("traits.gender");F.birthday=W.Facade.proxy("traits.birthday");var _e={},Pt=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.Track=void 0;var Ci=Pt(ae),N=Q,Mi=Oe,Fi=Pt(ge),gr=Pt(Ue);function Ct(e,t){N.Facade.call(this,e,t)}_e.Track=Ct;Ci.default(Ct,N.Facade);var E=Ct.prototype;E.action=function(){return"track"};E.type=E.action;E.event=N.Facade.field("event");E.value=N.Facade.proxy("properties.value");E.category=N.Facade.proxy("properties.category");E.id=N.Facade.proxy("properties.id");E.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};E.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};E.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};E.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};E.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};E.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};E.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};E.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};E.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};E.sku=N.Facade.proxy("properties.sku");E.tax=N.Facade.proxy("properties.tax");E.name=N.Facade.proxy("properties.name");E.price=N.Facade.proxy("properties.price");E.total=N.Facade.proxy("properties.total");E.repeat=N.Facade.proxy("properties.repeat");E.coupon=N.Facade.proxy("properties.coupon");E.shipping=N.Facade.proxy("properties.shipping");E.discount=N.Facade.proxy("properties.discount");E.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};E.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};E.description=N.Facade.proxy("properties.description");E.plan=N.Facade.proxy("properties.plan");E.subtotal=function(){var e=gr.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var r=this.tax();r&&(t-=r),r=this.shipping(),r&&(t-=r),r=this.discount(),r&&(t+=r)}return t};E.products=function(){var e=this.properties(),t=gr.default(e,"products");return Array.isArray(t)?t.filter(function(r){return r!==null}):[]};E.quantity=function(){var e=this.obj.properties||{};return e.quantity||1};E.currency=function(){var e=this.obj.properties||{};return e.currency||"USD"};E.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};E.query=N.Facade.proxy("options.query");E.properties=function(e){var t=this.field("properties")||{};e=e||{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=this[r]==null?this.proxy("properties."+r):this[r]();if(n==null)continue;t[e[r]]=n,delete t[r]}return t};E.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};E.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();if(Fi.default(t))return t};E.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event(),r=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!e&&t&&t.match(r)&&(e=this.proxy("properties.total")),Di(e)};E.cents=function(){var e=this.revenue();return typeof e!="number"?this.value()||0:e*100};E.identify=function(){var e=this.json();return e.traits=this.traits(),new Mi.Identify(e,this.opts)};function Di(e){if(e){if(typeof e=="number")return e;if(typeof e=="string"&&(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e)))return e}}var Pe={},br=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.Page=void 0;var Ti=br(ae),se=Q,Ni=_e,ji=br(ge);function Mt(e,t){se.Facade.call(this,e,t)}Pe.Page=Mt;Ti.default(Mt,se.Facade);var R=Mt.prototype;R.action=function(){return"page"};R.type=R.action;R.category=se.Facade.field("category");R.name=se.Facade.field("name");R.title=se.Facade.proxy("properties.title");R.path=se.Facade.proxy("properties.path");R.url=se.Facade.proxy("properties.url");R.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};R.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();e=e||{},r&&(t.category=r),n&&(t.name=n);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=this[i]==null?this.proxy("properties."+i):this[i]();if(o==null)continue;t[e[i]]=o,i!==e[i]&&delete t[i]}return t};R.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();if(ji.default(t))return t};R.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t};R.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"};R.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new Ni.Track(t,this.opts)};var Ve={},ki=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.Screen=void 0;var Li=ki(ae),_r=Pe,Ri=_e;function ie(e,t){_r.Page.call(this,e,t)}Ve.Screen=ie;Li.default(ie,_r.Page);ie.prototype.action=function(){return"screen"};ie.prototype.type=ie.prototype.action;ie.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"};ie.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new Ri.Track(t,this.opts)};var Je={},Ui=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});Je.Delete=void 0;var Bi=Ui(ae),wr=Q;function Ft(e,t){wr.Facade.call(this,e,t)}Je.Delete=Ft;Bi.default(Ft,wr.Facade);Ft.prototype.type=function(){return"delete"};(function(e){var t=D&&D.__assign||function(){return t=Object.assign||function(y){for(var g,b=1,m=arguments.length;b<m;b++){g=arguments[b];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(y[_]=g[_])}return y},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var r=Q;Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return r.Facade}});var n=ze;Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=qe;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return i.Group}});var o=Oe;Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=_e;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return a.Track}});var s=Pe;Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return s.Page}});var d=Ve;Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return d.Screen}});var v=Je;Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return v.Delete}}),e.default=t(t({},r.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:d.Screen,Delete:v.Delete})})(ee);function Le(e,t){var r=new ee.Facade(e,t);return e.type==="track"&&(r=new ee.Track(e,t)),e.type==="identify"&&(r=new ee.Identify(e,t)),e.type==="page"&&(r=new ee.Page(e,t)),e.type==="alias"&&(r=new ee.Alias(e,t)),e.type==="group"&&(r=new ee.Group(e,t)),e.type==="screen"&&(r=new ee.Screen(e,t)),Object.defineProperty(r,"obj",{value:e,writable:!0}),r}function Sr(e,t,r){return A(this,void 0,void 0,function(){function n(v,y){return A(this,void 0,void 0,function(){var g,b,m;return x(this,function(_){switch(_.label){case 0:return g=!1,b=null,[4,y({payload:Le(v,{clone:!0,traverse:!1}),integration:e,next:function(I){g=!0,I===null&&(b=null),I&&(b=I.obj)}})];case 1:return _.sent(),!g&&b!==null&&(b=b,b.integrations=w(w({},v.integrations),(m={},m[e]=!1,m))),[2,b]}})})}var i,o,a,s,d;return x(this,function(v){switch(v.label){case 0:i=Le(t,{clone:!0,traverse:!1}).rawEvent(),o=0,a=r,v.label=1;case 1:return o<a.length?(s=a[o],[4,n(i,s)]):[3,4];case 2:if(d=v.sent(),d===null)return[2,null];i=d,v.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function $i(e,t){function r(n){return A(this,void 0,void 0,function(){var i;return x(this,function(o){switch(o.label){case 0:return i=!1,[4,e({payload:Le(n.event,{clone:!0,traverse:!1}),integrations:t??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new ve({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:r,page:r,identify:r,alias:r,group:r}}const zi=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:Sr,sourceMiddlewarePlugin:$i},Symbol.toStringTag,{value:"Module"}));var qi=function(){function e(t,r){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=r,this.name=t,this.type=r.type,this.alternativeNames.push(r.name)}return e.prototype.addMiddleware=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this.type==="destination"&&(t=this.middleware).push.apply(t,r)},e.prototype.transform=function(t){return A(this,void 0,void 0,function(){var r;return x(this,function(n){switch(n.label){case 0:return[4,Sr(this.name,t.event,this.middleware)];case 1:return r=n.sent(),r===null&&t.cancel(new ve({retry:!1,reason:"dropped by destination middleware"})),[2,new pe(r)]}})})},e.prototype._createMethod=function(t){var r=this;return function(n){return A(r,void 0,void 0,function(){var i;return x(this,function(o){switch(o.label){case 0:return this.action[t]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=o.sent(),o.label=2;case 2:return[4,this.action[t](i)];case 3:return o.sent(),[2,n]}})})}},e.prototype.isLoaded=function(){return this.action.isLoaded()},e.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},e.prototype.load=function(t,r){return this.action.load(t,r)},e.prototype.unload=function(t,r){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,t,r)},e}();function Ki(e){if(!Array.isArray(e))throw new Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];return e.forEach(function(r){t.forEach(function(n){var i;if(r[n]===void 0)throw new Error("Plugin: ".concat((i=r.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function Vi(e,t){var r=e[t.creationName],n=e[t.name];return e.All===!1&&!r&&!n||r===!1||n===!1}function Ji(e,t,r,n,i){var o,a,s;return A(this,void 0,void 0,function(){var d,v,y,g,b=this;return x(this,function(m){switch(m.label){case 0:return d=[],v=gt(),y=(a=(o=e.middlewareSettings)===null||o===void 0?void 0:o.routingRules)!==null&&a!==void 0?a:[],g=((s=e.remotePlugins)!==null&&s!==void 0?s:[]).map(function(_){return A(b,void 0,void 0,function(){var I,S,h,p,c,u,f,l,O,C;return x(this,function(P){switch(P.label){case 0:if(Vi(t,_))return[2];P.label=1;case 1:if(P.trys.push([1,12,,13]),I=new RegExp("https://cdn.segment.(com|build)"),!n)return[3,7];S=_.url.split("/"),h=S[S.length-2],p=_.url.replace(h,btoa(h).replace(/=/g,"")),P.label=2;case 2:return P.trys.push([2,4,,6]),[4,Ye(p.replace(I,v))];case 3:return P.sent(),[3,6];case 4:return P.sent(),[4,Ye(_.url.replace(I,v))];case 5:return P.sent(),[3,6];case 6:return[3,9];case 7:return[4,Ye(_.url.replace(I,v))];case 8:P.sent(),P.label=9;case 9:return c=_.libraryName,typeof window[c]!="function"?[3,11]:(u=window[c],[4,u(w(w({},_.settings),r[_.name]))]);case 10:f=P.sent(),l=Array.isArray(f)?f:[f],Ki(l),O=y.filter(function(j){return j.destinationName===_.creationName}),l.forEach(function(j){var H=new qi(_.creationName,j);O.length&&i&&j.type==="destination"&&H.addMiddleware(i),d.push(H)}),P.label=11;case 11:return[3,13];case 12:return C=P.sent(),console.warn("Failed to load Remote Plugin",C),[3,13];case 13:return[2]}})})}),[4,Promise.all(g)];case 1:return m.sent(),[2,d.filter(Boolean)]}})})}var Gi=function(e){var t=!1;window.addEventListener("pagehide",function(){t||(t=!0,e())}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(t)return;t=!0,e()}else t=!1})},Qi=500;function Ir(e){var t=encodeURI(JSON.stringify(e)).split(/%..|./).length-1;return t/1024}function Wi(e){return Ir(e)>=Qi-50}function Hi(e){var t=[],r=0;return e.forEach(function(n){var i=Ir(t[r]);i>=64&&r++,t[r]?t[r].push(n):t[r]=[n]}),t}function Yi(e,t){var r,n,i=[],o=!1,a=(r=t==null?void 0:t.size)!==null&&r!==void 0?r:10,s=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:5e3;function d(m){var _;if(m.length!==0){var I=(_=m[0])===null||_===void 0?void 0:_.writeKey;return Re("https://".concat(e,"/b"),{keepalive:o,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({batch:m,writeKey:I})})}}function v(){return A(this,void 0,void 0,function(){var m;return x(this,function(_){return i.length?(m=i,i=[],[2,d(m)]):[2]})})}var y;function g(){y||(y=setTimeout(function(){y=void 0,v().catch(console.error)},s))}Gi(function(){if(o=!0,i.length){var m=Hi(i).map(d);Promise.all(m).catch(console.error)}});function b(m,_){return A(this,void 0,void 0,function(){var I;return x(this,function(S){return i.push(_),I=i.length>=a||Wi(i),[2,I||o?v():g()]})})}return{dispatch:b}}function Zi(e){function t(r,n){return Re(r,{keepalive:e==null?void 0:e.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(n)})}return{dispatch:t}}var Xi=function(e,t){return A(void 0,void 0,void 0,function(){var r;return x(this,function(n){return r=function(i){return A(void 0,void 0,void 0,function(){var o;return x(this,function(a){switch(a.label){case 0:return e(i)?(o=r,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,r(void 0)]})})};function eo(e,t){return A(this,void 0,void 0,function(){var r,n=this;return x(this,function(i){switch(i.label){case 0:return r=[],xe()?[2,t]:[4,Xi(function(){return t.length>0&&!xe()},function(){return A(n,void 0,void 0,function(){var o,a,s;return x(this,function(d){switch(d.label){case 0:return o=t.pop(),o?[4,Ie(o,e)]:[2];case 1:return a=d.sent(),s=a instanceof pe,s||r.push(o),[2]}})})})];case 1:return i.sent(),r.map(function(o){return t.pushWithBackoff(o)}),[2,t]}})})}function le(e,t,r,n){var i=this;e||setTimeout(function(){return A(i,void 0,void 0,function(){var o,a;return x(this,function(s){switch(s.label){case 0:return o=!0,[4,eo(r,t)];case 1:return a=s.sent(),o=!1,t.todo>0&&n(o,a,r,n),[2]}})})},Math.random()*5e3)}function to(e){return A(this,void 0,void 0,function(){var t;return x(this,function(r){return t=navigator.userAgentData,t?e?[2,t.getHighEntropyValues(e).catch(function(){return t.toJSON()})]:[2,t.toJSON()]:[2,void 0]})})}function ro(e,t){var r,n,i,o,a=e.user();return t.previousId=(i=(n=(r=t.previousId)!==null&&r!==void 0?r:t.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),t.userId=(o=t.userId)!==null&&o!==void 0?o:t.to,delete t.from,delete t.to,t}function no(e,t,r){var n,i,o;return A(this,void 0,void 0,function(){function a(p){return A(this,void 0,void 0,function(){var c,u;return x(this,function(f){return xe()?(d.push(p),le(y,d,h,le),[2,p]):(v.add(p),c=p.event.type.charAt(0),S&&p.event.context&&(p.event.context.userAgentData=S),u=Le(p.event).json(),p.event.type==="track"&&delete u.traits,p.event.type==="alias"&&(u=ro(e,u)),[2,I.dispatch("".concat(m,"/").concat(c),Nn(e,u,t,r)).then(function(){return p}).catch(function(){return d.pushWithBackoff(p),le(y,d,h,le),p}).finally(function(){v.delete(p)})])})})}var s,d,v,y,g,b,m,_,I,S,h;return x(this,function(p){switch(p.label){case 0:window.addEventListener("pagehide",function(){d.push.apply(d,Array.from(v)),v.clear()}),s=(n=t==null?void 0:t.apiKey)!==null&&n!==void 0?n:"",d=e.options.disableClientPersistence?new lt(e.queue.queue.maxAttempts,[]):new mt(e.queue.queue.maxAttempts,"".concat(s,":dest-Segment.io")),v=new Set,y=!1,g=(i=t==null?void 0:t.apiHost)!==null&&i!==void 0?i:or,b=(o=t==null?void 0:t.protocol)!==null&&o!==void 0?o:"https",m="".concat(b,"://").concat(g),_=t==null?void 0:t.deliveryStrategy,I=(_==null?void 0:_.strategy)==="batching"?Yi(g,_.config):Zi(_==null?void 0:_.config),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,to(e.options.highEntropyValuesClientHints)];case 2:return S=p.sent(),[3,4];case 3:return p.sent(),S=void 0,[3,4];case 4:return h={name:"Segment.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:a,identify:a,page:a,alias:a,group:a,screen:a},d.todo&&le(y,d,h,le),[2,h]}})})}function fe(e){var t,r=e.event;Zr(r),Xr(r),r.type==="track"&&en(r);var n=(t=r.properties)!==null&&t!==void 0?t:r.traits;if(r.type!=="alias"&&!J(n))throw new ne(".properties","is not an object");return Yr(r),e}var io={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:fe,identify:fe,page:fe,alias:fe,group:fe,screen:fe},oo=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},Ar=function(e,t,r){r.getCalls(e).forEach(function(n){Dt(t,n).catch(console.error)})},ao=function(e,t){return A(void 0,void 0,void 0,function(){var r,n,i;return x(this,function(o){switch(o.label){case 0:r=0,n=t.getCalls("addSourceMiddleware"),o.label=1;case 1:return r<n.length?(i=n[r],[4,Dt(e,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},so=Ar.bind(globalThis,"on"),uo=Ar.bind(globalThis,"setAnonymousId"),co=function(e,t){t.toArray().forEach(function(r){setTimeout(function(){Dt(e,r).catch(console.error)},0)})},lo=function(){function e(){this._value={}}return e.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this._value))},e.prototype.getCalls=function(t){var r;return(r=this._value[t])!==null&&r!==void 0?r:[]},e.prototype.push=function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach(function(i){t._value[i.method]?t._value[i.method].push(i):t._value[i.method]=[i]}),this},e.prototype.clear=function(){return this._value={},this},e}();function Dt(e,t){return A(this,void 0,void 0,function(){var r,n;return x(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t.called?[2,void 0]:(t.called=!0,r=e[t.method].apply(e,t.args),oo(r)?[4,r]:[3,2]);case 1:i.sent(),i.label=2;case 2:return t.resolve(r),[3,4];case 3:return n=i.sent(),t.reject(n),[3,4];case 4:return[2]}})})}var fo=function(){function e(t){var r=this;this._preInitBuffer=new lo,this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=ye,this._promise=t(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];r.instance=i,r.ctx=o}).catch(function(){})}return e.prototype.then=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).then.apply(t,r)},e.prototype.catch=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).catch.apply(t,r)},e.prototype.finally=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).finally.apply(t,r)},e.prototype._createMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r.instance){var a=(n=r.instance)[t].apply(n,i);return Promise.resolve(a)}return new Promise(function(s,d){r._preInitBuffer.push({method:t,args:i,resolve:s,reject:d,called:!1})})}},e.prototype._createChainableMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.instance?((n=r.instance)[t].apply(n,i),r):(r._preInitBuffer.push({method:t,args:i,resolve:function(){},reject:console.error,called:!1}),r)}},e}();function po(e){var t=e[0],r=e.slice(1);return{method:t,resolve:function(){},reject:console.error,args:r,called:!1}}var ho=function(e){return e.map(po)},st=function(){var e=window.analytics;if(!Array.isArray(e))return[];var t=e.splice(0,e.length);return ho(t)},Ze,Gt,vo=pt(),Qt=(Ze=(Gt=vo).__SEGMENT_INSPECTOR__)!==null&&Ze!==void 0?Ze:Gt.__SEGMENT_INSPECTOR__={},yo=function(e){var t;return(t=Qt.attach)===null||t===void 0?void 0:t.call(Qt,e)};function mo(e,t){var r=t??gt();return Re("".concat(r,"/v1/projects/").concat(e,"/settings")).then(function(n){return n.ok?n.json():n.text().then(function(i){throw new Error(i)})}).catch(function(n){throw console.error(n.message),n})}function go(e){return lr().NODE_ENV!=="test"&&Object.keys(e.integrations).length>1}function bo(e){var t,r,n;return lr().NODE_ENV!=="test"&&((n=(r=(t=e.middlewareSettings)===null||t===void 0?void 0:t.routingRules)===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)>0}function _o(e,t){t.push.apply(t,st()),uo(e,t),so(e,t)}function wo(e,t){return A(this,void 0,void 0,function(){return x(this,function(r){switch(r.label){case 0:return t.push.apply(t,st()),[4,ao(e,t)];case 1:return r.sent(),t.push.apply(t,st()),co(e,t),t.clear(),[2]}})})}function So(e,t,r,n,i,o,a){var s,d,v;return A(this,void 0,void 0,function(){var y,g,b,m,_,I,S,h,p,c,u,f,l,O=this;return x(this,function(C){switch(C.label){case 0:return bo(t)?[4,z(()=>import("./index-d0a184de.js"),["assets/index-d0a184de.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"]).then(function(P){return P.tsubMiddleware(t.middlewareSettings.routingRules)})]:[3,2];case 1:return g=C.sent(),[3,3];case 2:g=void 0,C.label=3;case 3:return y=g,go(t)||a.length>0?[4,z(()=>import("./index-4d1cd54c.js"),["assets/index-4d1cd54c.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/is-plan-event-enabled-a83d33b8.js","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"]).then(function(P){return P.ajsDestinations(e,t,r.integrations,n,y,a)})]:[3,5];case 4:return m=C.sent(),[3,6];case 5:m=[],C.label=6;case 6:return b=m,t.legacyVideoPluginsEnabled?[4,z(()=>import("./index-8e677336.js"),["assets/index-8e677336.js","assets/index-effbfb95.js","assets/index-0e60c24e.css"]).then(function(P){return P.loadLegacyVideoPlugins(r)})]:[3,8];case 7:C.sent(),C.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,z(()=>import("./index-800a7cc1.js"),["assets/index-800a7cc1.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/is-plan-event-enabled-a83d33b8.js"]).then(function(P){var j;return P.schemaFilter((j=n.plan)===null||j===void 0?void 0:j.track,t)})]:[3,10];case 9:return I=C.sent(),[3,11];case 10:I=void 0,C.label=11;case 11:return _=I,S=Hn(t,i),[4,Ji(t,r.integrations,S,i.obfuscate,y).catch(function(){return[]})];case 12:return h=C.sent(),p=k(k(k([io,ri],o,!0),b,!0),h,!0),_&&p.push(_),c=((d=n.integrations)===null||d===void 0?void 0:d.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,c?[3,14]:(f=(u=p).push,[4,no(r,S["Segment.io"],t.integrations)]);case 13:f.apply(u,[C.sent()]),C.label=14;case 14:return[4,r.register.apply(r,p)];case 15:return l=C.sent(),Object.entries((v=t.enabledMiddleware)!==null&&v!==void 0?v:{}).some(function(P){var j=P[1];return j})?[4,z(()=>import("./index-b05cc9b2.js"),["assets/index-b05cc9b2.js","assets/index-effbfb95.js","assets/index-0e60c24e.css","assets/index-ec3b8ff9.js","assets/index.esm-5a89640b.js","assets/use-debounce-438a4ce8.js","assets/axios-4a70c6fc.js","assets/a-0eba6a7f.js","assets/react-hotkeys-hook.esm-745ca041.js","assets/use-notification-9f7c3c92.js","assets/index-1ec19c89.js","assets/error-messages-d2d0bb30.js","assets/nested-form-c66382a0.js","assets/lodash-72dfe3e0.js","assets/index-dd9f9076.js","assets/focus-modal-d105ce27.js","assets/index-523daaeb.js","assets/index-903c1727.js"]).then(function(P){var j=P.remoteMiddlewares;return A(O,void 0,void 0,function(){var H,Ce;return x(this,function(Nt){switch(Nt.label){case 0:return[4,j(l,t,i.obfuscate)];case 1:return H=Nt.sent(),Ce=H.map(function(Mr){return r.addSourceMiddleware(Mr)}),[2,Promise.all(Ce)]}})})})]:[3,17];case 16:C.sent(),C.label=17;case 17:return[2,l]}})})}function Io(e,t,r){var n,i,o,a,s,d,v;return t===void 0&&(t={}),A(this,void 0,void 0,function(){var y,g,b,m,_,I,S,h,p,c,u;return x(this,function(f){switch(f.label){case 0:return e.cdnURL&&Wn(e.cdnURL),(n=e.cdnSettings)!==null&&n!==void 0?(g=n,[3,3]):[3,1];case 1:return[4,mo(e.writeKey,e.cdnURL)];case 2:g=f.sent(),f.label=3;case 3:return y=g,t.updateCDNSettings&&(y=t.updateCDNSettings(y)),b=(o=(i=y.integrations["Segment.io"])===null||i===void 0?void 0:i.retryQueue)!==null&&o!==void 0?o:!0,m=w({retryQueue:b},t),_=new Vn(e,m),yo(_),I=(a=e.plugins)!==null&&a!==void 0?a:[],S=(s=e.classicIntegrations)!==null&&s!==void 0?s:[],ar.initRemoteMetrics(y.metrics),_o(_,r),[4,So(e.writeKey,y,_,m,t,I,S)];case 4:return h=f.sent(),p=(d=window.location.search)!==null&&d!==void 0?d:"",c=(v=window.location.hash)!==null&&v!==void 0?v:"",u=p.length?p:c.replace(/(?=#).*(?=\?)/,""),u.includes("ajs_")?[4,_.queryString(u).catch(console.error)]:[3,6];case 5:f.sent(),f.label=6;case 6:return _.initialized=!0,_.emit("initialize",e,t),t.initialPageview&&_.page().catch(console.error),[4,wo(_,r)];case 7:return f.sent(),[2,[_,h]]}})})}var xr=function(e){U(t,e);function t(){var r=this,n=Yn(),i=n.promise,o=n.resolve;return r=e.call(this,function(a){return i.then(function(s){var d=s[0],v=s[1];return Io(d,v,a)})})||this,r._resolveLoadStart=function(a,s){return o([a,s])},r}return t.prototype.load=function(r,n){return n===void 0&&(n={}),this._resolveLoadStart(r,n),this},t.load=function(r,n){return n===void 0&&(n={}),new t().load(r,n)},t.standalone=function(r,n){return t.load({writeKey:r},n).then(function(i){return i[0]})},t}(fo);const Tt=Kr.create({baseURL:`${Tr}/admin/analytics-configs`,withCredentials:!0}),Ao=xr.load({writeKey:Vr}),xo=async()=>{const{data:e}=await Tt.get("/");return e},Eo=async e=>{const{data:t}=await Tt.post("/",e);return t},Oo=async e=>{const{data:t}=await Tt.post("/update",e);return t},Er=["analytics-config"],Or=()=>{const e=jr();return()=>{e.invalidateQueries(Er)}},Po=()=>{const{isFeatureEnabled:e}=Wt(),{data:t,...r}=Nr(Er,()=>xo(),{retry:!1,enabled:e("analytics")});return{...t,...r}},Wo=()=>{const e=Or();return Ht(r=>Oo(r),{onSuccess:e})},Co=()=>{const e=Or();return Ht(r=>Eo(r),{onSuccess:e})},Mo=({form:e})=>{const{control:t,setValue:r,path:n}=e,i=Xe({control:t,name:n("opt_out")});return L.useEffect(()=>{i&&r(n("anonymize"),!1)},[i]),Y("div",{className:"flex flex-col gap-y-xlarge",children:[Y("div",{className:Yt("flex items-start transition-opacity",{"opacity-50":i}),children:[Y("div",{className:"flex flex-col flex-1 gap-y-2xsmall",children:[T("h2",{className:"inter-base-semibold",children:"Anonymize my usage data"}),T("p",{className:"inter-base-regular text-grey-50",children:"You can choose to anonymize your usage data. If this option is selected, we will not collect your personal information, such as your name and email address."})]}),T(jt,{name:n("anonymize"),control:t,render:({field:{value:o,onChange:a}})=>T(Lt,{checked:o,onCheckedChange:a,disabled:i})})]}),Y("div",{className:"flex items-start",children:[Y("div",{className:"flex flex-col flex-1 gap-y-2xsmall",children:[T("h2",{className:"inter-base-semibold",children:"Opt out of sharing my usage data"}),T("p",{className:"inter-base-regular text-grey-50",children:"You can always opt out of sharing your usage data at any time."})]}),T(jt,{name:n("opt_out"),control:t,render:({field:{value:o,onChange:a}})=>T(Lt,{checked:o,onCheckedChange:a})})]})]})},Fo=()=>{const e=Jr(),{mutate:t,isLoading:r}=Co(),n=zr({defaultValues:{config:{anonymize:!1,opt_out:!1}}}),{register:i,formState:{errors:o},control:a}=n,{setSubmittingConfig:s}=Cr(),d=Xe({control:a,name:"config.opt_out"}),v=Xe({control:a,name:"config.anonymize"}),y=n.handleSubmit(g=>{s(!0);const{email:b,config:m}=g,_=!m.anonymize&&!m.opt_out;t(m,{onSuccess:()=>{e("Success","Your preferences were successfully updated","success"),_&&Ao.track("userEmail",{email:b}),s(!1)},onError:I=>{e("Error",Gr(I),"error"),s(!1)}})});return T(kt,{children:T(kt.Main,{children:T("div",{className:"flex flex-col items-center",children:Y("div",{className:"mt-5xlarge flex flex-col max-w-[664px] w-full",children:[T("h1",{className:"inter-xlarge-semibold mb-large",children:"Help us get better"}),Y("p",{className:"text-grey-50",children:["To create the most compelling e-commerce experience we would like to gain insights in how you use Medusa. User insights allow us to build a better, more engaging, and more usable products. We only collect data for product improvements. Read what data we gather in our"," ",T("a",{href:"https://docs.medusajs.com/usage",rel:"noreferrer noopener",target:"_blank",className:"text-violet-60",children:"documentation"}),"."]}),Y("div",{className:"mt-xlarge flex flex-col gap-y-xlarge",children:[T(Wr,{label:"Email",placeholder:"you@company.com",disabled:d||v,className:Yt("transition-opacity",{"opacity-50":d||v}),...i("email",{pattern:{message:"Please enter a valid email",value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}}),errors:o}),T(Mo,{form:Qr(n,"config")})]}),T("div",{className:"flex items-center justify-end mt-5xlarge",children:T(kr,{variant:"primary",size:"small",loading:r,onClick:y,children:"Continue"})})]})})})})},Pr=L.createContext(null),Do=({writeKey:e,children:t})=>{const[r,n]=L.useState(!1),{analytics_config:i,isLoading:o}=Po(),a=Lr(),{user:s}=Rr(),{users:d}=Ur(),{store:v}=Br(),{isFeatureEnabled:y}=Wt(),g=L.useMemo(()=>y("analytics"),[y]),b=L.useMemo(()=>!i||!g||i.opt_out?null:xr.load({writeKey:e}),[i,e,g]);L.useEffect(()=>{!b||!i||!s||!v||b.identify(s.id,{store:v.name})},[i,b,s,v]);const m=L.useMemo(()=>r?!0:!g||!s?!1:!i&&!o,[i,o,g,s,r]),_=qr(m,1e3),I=L.useCallback((O,C)=>{b&&b.track(O,C)},[b]),S=L.useCallback(O=>{I("numUsers",O)},[I]),h=L.useCallback(O=>{I("storeName",O)},[I]),p=O=>{I("numProducts",O)},c=O=>{I("numOrders",O)},u=O=>{I("regions",O)},f=O=>{I("currencies",O)},l=O=>{I("numDiscounts",O)};return L.useEffect(()=>{d&&S({count:d.length})},[d,S]),L.useEffect(()=>{v&&h({name:v.name})},[v,h]),L.useEffect(()=>{b&&b.page()},[a]),Y(Pr.Provider,{value:{trackRegions:u,trackCurrencies:f,trackNumberOfOrders:c,trackNumberOfProducts:p,trackNumberOfDiscounts:l,setSubmittingConfig:n},children:[m&&T($r,{isVisible:_,isFullScreen:!0,children:T(Fo,{})}),t]})},Cr=()=>{const e=L.useContext(Pr);if(!e)throw new Error("useAnalytics must be used within a AnalyticsProvider");return e},Ho=Object.freeze(Object.defineProperty({__proto__:null,default:Do,useAnalytics:Cr},Symbol.toStringTag,{value:"Module"}));export{Mo as A,ve as C,lt as P,Wo as a,Po as b,Qo as c,Vo as d,Sr as e,ee as f,Go as g,Jo as h,xe as i,J as j,mt as k,Ye as l,Hn as m,Ie as n,bn as o,Xi as p,pe as q,tn as r,Sn as s,Ho as t,Cr as u};
