import{r as n,a6 as O,a7 as _,j as l,d as C,a as o}from"./index-effbfb95.js";import{C as z}from"./index-0d9858ea.js";import{P as A}from"./index-dd9f9076.js";import{F as D,a as F,S as B,b as G}from"./index-b17c211e.js";import{T as R}from"./index-4192ae3e.js";const V=["proposed","draft","published","rejected"],Z=10,Q=({filters:a,submitFilters:S,clearFilters:y,tabs:m,onTabClick:f,activeTab:T,onRemoveTab:u,onSaveTab:p})=>{const[s,g]=n.useState(a),[b,w]=n.useState(""),P=e=>{u&&u(e)},L=()=>{p&&p(b,s)},I=e=>{f&&f(e)};n.useEffect(()=>{g(a)},[a]);const j=()=>{S(s)},E=()=>{y()},h=n.useMemo(()=>Object.entries(a||{}).reduce((e,[,t])=>(t!=null&&t.open&&(e=e+1),e),0),[a]),r=(e,t)=>{g(i=>({...i,[e]:t}))},[c,v]=n.useState({offset:0,limit:Z}),{collections:d,count:k,isLoading:M}=O(c),{product_tags:x}=_(),N=e=>{e>0?v(t=>({...t,offset:t.offset+t.limit})):e<0&&v(t=>({...t,offset:Math.max(t.offset-t.limit,0)}))};return l("div",{className:"flex space-x-1",children:[l(D,{submitFilters:j,clearFilters:E,triggerElement:l("button",{className:C("flex rounded-rounded items-center space-x-1 focus-visible:outline-none focus-visible:shadow-input focus-visible:border-violet-60"),children:[l("div",{className:"flex rounded-rounded items-center bg-grey-5 border border-grey-20 inter-small-semibold px-2 h-6",children:["Filters",o("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:o("span",{className:"text-violet-60 inter-small-semibold",children:h||"0"})})]}),o("div",{className:"flex items-center rounded-rounded bg-grey-5 border border-grey-20 inter-small-semibold p-1",children:o(A,{size:14})})]}),children:[o(F,{filterTitle:"Status",options:V,filters:s.status.filter,open:s.status.open,setFilter:e=>r("status",e)}),o(F,{filterTitle:"Collection",options:(d==null?void 0:d.map(e=>({value:e.id,label:e.title})))||[],isLoading:M,hasPrev:c.offset>0,hasMore:c.offset+c.limit<(k??0),onShowPrev:()=>N(-1),onShowNext:()=>N(1),filters:s.collection.filter,open:s.collection.open,setFilter:e=>r("collection",e)}),l("div",{className:"flex flex-col w-full pb-2",children:[l("div",{className:"flex w-full items-center px-3 mb-1 py-1.5 hover:bg-grey-5 rounded cursor-pointer",onClick:()=>{r("tags",{open:!s.tags.open,filter:s.tags.filter})},children:[l("div",{className:`w-5 h-5 flex justify-center border-grey-30 border text-grey-0 rounded-base ${s.tags.open&&"bg-violet-60"}`,children:[o("span",{className:"self-center",children:s.tags.open&&o(z,{size:16})}),o("input",{type:"checkbox",className:"hidden",id:"Tags",name:"Tags",value:"Tags",checked:s.tags.open})]}),o("span",{className:C("text-grey-90 ml-2",{"inter-small-semibold":s.tags.open,"inter-small-regular":!s.tags.open}),children:"Tags"})]}),s.tags.open&&o("div",{"data-tip":s.tags.invalidTagsMessage||"",className:"pl-6",children:o(R,{className:"pt-0 pb-1",showLabel:!1,placeholder:"Spring, summer...",values:(s.tags.filter||[]).map(e=>{const t=(x||[]).find(i=>i.id===e);return t&&t.value}).filter(Boolean),onValidate:e=>{const t=(x||[]).find(i=>i.value.toLowerCase()===e.toLowerCase());return t&&t.id},onChange:e=>{r("tags",{open:s.tags.open,filter:e})}})})]}),o(B,{saveFilter:L,name:b,setName:w})]}),m&&m.map(e=>o(G,{onClick:()=>I(e.value),label:e.label,isActive:T===e.value,removable:!!e.removable,onRemove:()=>P(e.value)},e.value))]})};export{Q as P};
