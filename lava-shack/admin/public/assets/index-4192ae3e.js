import{r as f,j as l,a,d as i,C}from"./index-effbfb95.js";import{c as S,T as Y}from"./index-dd9f9076.js";const j=13,B=9,H=8,W=37,O=39,L=({onChange:d,onValidate:p,values:n=[],label:w,showLabel:x=!0,containerProps:P,className:y,required:v,placeholder:E,withTooltip:z=!1,tooltipContent:N,tooltip:T,invalidMessage:k="is not a valid tag",...K})=>{var g;const[u,m]=f.useState(!1),[s,o]=f.useState(-1),e=f.useRef(null),h=t=>{let r=t;typeof p<"u"&&(r=p(t)),r?(d([...n,r]),e!=null&&e.current&&(e.current.value="")):m(!0)},D=t=>{if(u&&m(!1),!(e!=null&&e.current))return;const{value:r,selectionStart:c}=e.current;switch(t.keyCode){case W:s!==-1?s>0&&o(s-1):c||(o(n.length-1),t.preventDefault());break;case O:s!==-1&&(s<n.length-1?(o(s+1),t.preventDefault()):o(-1));break;case j:t.preventDefault();break;case B:r&&(h(r),t.preventDefault());break;case H:if(!e.current.selectionStart&&s===-1&&(o(n.length-1),t.preventDefault()),s!==-1){const b=[...n];b.splice(s,1),d(b),o(-1)}break;default:o(-1)}},_=t=>{const r=[...n];r.splice(t,1),d(r)},A=t=>{var c;const r=(c=e==null?void 0:e.current)==null?void 0:c.value;o(-1),r&&h(r)},I=()=>{if(!(e!=null&&e.current))return;const t=e.current.value;t!=null&&t.endsWith(",")&&(e.current.value=t.slice(0,-1),h(t.slice(0,-1)))};return l("div",{className:y,children:[x&&a(S,{label:w||"Tags (comma separated)",required:v,tooltipContent:N,tooltip:T,className:"mb-2"}),a(Y,{open:u,side:"top",content:l("p",{className:"text-rose-50",children:[(g=e==null?void 0:e.current)==null?void 0:g.value," ",k]}),children:a("div",{className:i("h-auto min-h-[40px] bg-grey-5 shadow-border focus-within:outline-4 focus-within:outline focus-within:outline-violet-60/10 transition-colors focus-within:shadow-focus-border rounded-rounded flex items-center px-3 box-border",{"shadow-error-border focus-within:shadow-error-border focus-within:outline-rose-60/10":u}),children:a("div",{className:"h-full",children:l("div",{className:"w-full gap-xsmall flex flex-wrap box-border h-28px py-1.5",children:[n.map((t,r)=>l("div",{className:i("flex items-center justify-center whitespace-nowrap w-max bg-grey-20 rounded-rounded px-3 py-1 gap-x-1",{"!bg-grey-90":r===s}),children:[a("span",{className:i("inline-block text-grey-50 inter-small-semibold",{"text-grey-20":r===s}),children:t}),a(C,{className:"inline cursor-pointer text-grey-40",size:"16",onClick:()=>_(r)})]},r)),a("input",{id:"tag-input",ref:e,onBlur:A,onKeyDown:D,onChange:I,className:i("focus:outline-none bg-transparent flex-1"),placeholder:n!=null&&n.length?"":E,...K})]})})})})]})};export{L as T};
