import{g as E,r as y,q as d}from"./index-effbfb95.js";import{_ as F,e as q,a as C,i as N,b as m,c as D,d as R,f as w,g as z}from"./_isIndex-6af6139d.js";var K=F,L=function(){try{var e=K(Object,"defineProperty");return e({},"",{}),e}catch{}}(),j=L,h=j;function Q(e,t,r){t=="__proto__"&&h?h(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var U=Q,G=U,V=q,X=Object.prototype,Y=X.hasOwnProperty;function Z(e,t,r){var n=e[t];(!(Y.call(e,t)&&V(n,r))||r===void 0&&!(t in e))&&G(e,t,r)}var W=Z,B=C,H=N,J="[object Symbol]";function k(e){return typeof e=="symbol"||H(e)&&B(e)==J}var _=k,ee=m,te=_,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/;function se(e,t){if(ee(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||te(e)?!0:ne.test(e)||!re.test(e)||t!=null&&e in Object(t)}var ie=se,A=D,ae="Expected a function";function b(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ae);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var c=e.apply(this,n);return r.cache=i.set(s,c)||i,c};return r.cache=new(b.Cache||A),r}b.Cache=A;var oe=b,fe=oe,ce=500;function ue(e){var t=fe(e,function(n){return r.size===ce&&r.clear(),n}),r=t.cache;return t}var pe=ue,le=pe,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,de=le(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ye,function(r,n,s,i){t.push(s?i.replace(ge,"$1"):n||r)}),t}),me=de;function _e(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var be=_e,v=R,he=be,ve=m,Se=_,Oe=1/0,S=v?v.prototype:void 0,O=S?S.toString:void 0;function T(e){if(typeof e=="string")return e;if(ve(e))return he(e,T)+"";if(Se(e))return O?O.call(e):"";var t=e+"";return t=="0"&&1/e==-Oe?"-0":t}var $e=T,Pe=$e;function Ae(e){return e==null?"":Pe(e)}var Te=Ae,Ie=m,Me=ie,xe=me,Ee=Te;function Fe(e,t){return Ie(e)?e:Me(e,t)?[e]:xe(Ee(e))}var qe=Fe,Ce=_,Ne=1/0;function De(e){if(typeof e=="string"||Ce(e))return e;var t=e+"";return t=="0"&&1/e==-Ne?"-0":t}var Re=De,we=W,ze=qe,Ke=w,$=z,Le=Re;function je(e,t,r,n){if(!$(e))return e;t=ze(t,e);for(var s=-1,i=t.length,c=i-1,f=e;f!=null&&++s<i;){var a=Le(t[s]),u=r;if(a==="__proto__"||a==="constructor"||a==="prototype")return e;if(s!=c){var p=f[a];u=n?n(p,a,f):void 0,u===void 0&&(u=$(p)?p:Ke(t[s+1])?[]:{})}we(f,a,u),f=f[a]}return e}var Qe=je,Ue=Qe;function Ge(e,t,r){return e==null?e:Ue(e,t,r)}var Ve=Ge;const Xe=E(Ve),Ye=["q","offset","limit"],Ze={limit:15,offset:0};function I(e,t){t=t||{};for(const[r,n]of Object.entries(e))r==="q"?typeof n=="string"&&(n?t.q=n:delete t.q):(r==="offset"||r==="limit")&&(t[r]=n);return t}function P(e){return I(e)}function g(e){return I(e,{...e.additionalFilters})}function We(e,t){const r={...Ze,...t};if(!e)return r;const n=d.parse(e);for(const[s,i]of Object.entries(n))if(typeof i=="string"&&Ye.includes(s))switch(s){case"offset":case"limit":r[s]=parseInt(i);break;case"q":r.q=i;break}return r}function Be(e,t){if(t.type==="setFilters"){const r={...e};return Xe(r,t.path,t.payload),r}return t.type==="setQuery"?{...e,q:t.payload,offset:0}:t.type==="setOffset"?{...e,offset:t.payload}:e}const ke=e=>{const t=location.search.substring(1),[r,n]=y.useReducer(Be,We(t,e)),s=o=>{n({type:"setDefaults",payload:o})},i=o=>{if(o===1){const l=r.offset+r.limit;n({type:"setOffset",payload:l})}else{const l=Math.max(r.offset-r.limit,0);n({type:"setOffset",payload:l})}},c=(o,l)=>n({type:"setFilters",path:o,payload:l}),f=o=>n({type:"setQuery",payload:o}),a=()=>d.stringify(g(r),{skipNulls:!0}),u=()=>{const o=P(r);return d.stringify(o,{skipNulls:!0})},p=y.useMemo(()=>g(r),[r]),M=y.useMemo(()=>P(r),[r]),x=y.useMemo(()=>u(),[r]);return{...r,filters:{...r},representationObject:M,representationString:x,queryObject:p,paginate:i,getQueryObject:g,getQueryString:a,setQuery:f,setFilters:c,setDefaultFilters:s}};export{ke as u};
