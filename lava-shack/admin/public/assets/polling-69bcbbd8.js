import{e as u,bI as d,r as c,a as h}from"./index-effbfb95.js";const b=u.createContext({}),i=new Date(new Date().setMonth(new Date().getMonth()-1));i.setHours(0,0,0,0);const n=[2,5,10,15,30,60],g=s=>{let e=Date.now();return{current:s,register(){e=Date.now();const o=n.findIndex(t=>t===this.current);this.current=n[Math.min(n.length-1,o+1)]},isEnabled(){return Date.now()>=e},reset(){e=Date.now(),this.current=n[0]}}},r=g(n[0]),D=({children:s})=>{const{batch_jobs:e,isError:o,refetch:t}=d({created_at:{gte:i},failed_at:null},{refetchOnWindowFocus:!0,refetchInterval:r.current*1e3,enabled:r.isEnabled(),onSettled:r.register.bind(r)}),a=c.useCallback(async()=>{r.reset(),await t()},[t]),l=c.useMemo(()=>({batchJobs:e,hasPollingError:o,resetInterval:a,refetch:t}),[t,e,o,a]);return h(b.Provider,{value:l,children:s})};export{b as P,D as a};
