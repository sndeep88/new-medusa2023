import{e as P,r as a,j as x,a as s,d as S}from"./index-effbfb95.js";import{C as U}from"./index.esm-841d990e.js";import{c as $}from"./react-select.esm-1ec1493a.js";import{n as A,p as j}from"./index-84767cd7.js";import{c as y,T as F,M as k,P as H,b as T,I as z}from"./index-dd9f9076.js";import{S as q}from"./index-b6a697c3.js";const M=P.createContext({currencyInfo:void 0}),C=t=>t?$[t.toUpperCase()]:void 0,B=({currentCurrency:t,currencyCodes:d,size:o="full",readOnly:u=!1,hideCurrency:b=!1,onChange:c,children:f,className:g})=>{const h=(d==null?void 0:d.map(l=>({label:l.toUpperCase(),value:l})))??[],[m,v]=a.useState(C(t)),[p,e]=a.useState(t?{label:t.toUpperCase(),value:t}:null);a.useEffect(()=>{t&&(v(C(t)),e({label:t.toUpperCase(),value:t}))},[t]);const w=l=>{l&&(e(l),v(C(l.value)),c&&c(l.value))};return s(M.Provider,{value:{currencyInfo:m},children:x("div",{className:S("flex items-center gap-x-xsmall",g),children:[!b&&s("div",{className:S({"w-[144px]":o==="medium"},{"w-[120px]":o==="small"},{"flex-1":o==="full"}),children:u?s(z,{label:"Currency",value:p==null?void 0:p.label,readOnly:!0,className:"pointer-events-none",tabIndex:-1}):s(q,{enableSearch:!0,label:"Currency",value:p,onChange:w,options:h,disabled:u})}),f&&s("div",{className:"flex-1",children:f})]})})},D=a.forwardRef(({label:t,required:d=!1,amount:o,step:u=1,allowNegative:b=!1,onChange:c,onValidate:f,invalidMessage:g,errors:h,name:m,...v},p)=>{const{currencyInfo:e}=a.useContext(M),[w,l]=a.useState(!1),[E,I]=a.useState(o?`${A(e==null?void 0:e.code,o)}`:void 0),N=a.useRef(null);a.useImperativeHandle(p,()=>N.current),a.useEffect(()=>{var i;(i=N.current)==null||i.dispatchEvent(new Event("blur"))},[e==null?void 0:e.decimal_digits]),a.useEffect(()=>{e&&o&&I(`${A(e==null?void 0:e.code,o)}`)},[o]);const R=(i,r)=>{let n;if(typeof r=="number"&&e?n=Math.round(j(e.code,r)):n=void 0,c){let _=!0;if(f&&(_=f(n)),_)c(n),l(!1);else{l(!0);return}}I(i)},V=i=>{const r=parseFloat(E??"0")+i;!b&&r<0||R(`${r}`,r)};return x("div",{...v,children:[s(y,{label:t,required:d,className:"mb-xsmall"}),x("div",{className:S("w-full flex items-center bg-grey-5 border border-gray-20 px-small py-xsmall rounded-rounded h-10 focus-within:shadow-input focus-within:border-violet-60",{"border-rose-50 focus-within:shadow-cta focus-within:shadow-rose-60/10 focus-within:border-rose-50":h&&m&&h[m]}),children:[(e==null?void 0:e.symbol_native)&&s(F,{open:w,side:"top",content:g||"Amount is not valid",children:s("span",{className:"inter-base-regular text-grey-40 mr-xsmall",children:e.symbol_native})}),s(U,{className:"bg-transparent outline-none outline-0 w-full remove-number-spinner leading-base text-grey-90 font-normal caret-violet-60 placeholder-grey-40",decimalScale:e==null?void 0:e.decimal_digits,value:E,onValueChange:(i,r,n)=>R(i,n==null?void 0:n.float),ref:N,step:u,allowNegativeValue:b,placeholder:"0.00",name:m}),x("div",{className:"flex items-center",children:[s("button",{className:"mr-2 text-grey-50 w-4 h-4 hover:bg-grey-10 rounded-soft cursor-pointer",type:"button",onClick:()=>V(-u),children:s(k,{size:16})}),s("button",{type:"button",className:"text-grey-50 w-4 h-4 hover:bg-grey-10 rounded-soft cursor-pointer",onClick:()=>V(u),children:s(H,{size:16})})]})]}),s(T,{name:m,errors:h})]})}),W={Root:B,Amount:D};export{W as C};
